"use strict";(self.webpackChunkuserguide=self.webpackChunkuserguide||[]).push([[15105],{3905:function(e,n,t){t.d(n,{Zo:function(){return p},kt:function(){return d}});var r=t(67294);function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){s(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,r,s=function(e,n){if(null==e)return{};var t,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(s[t]=e[t]);return s}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(s[t]=e[t])}return s}var u=r.createContext({}),o=function(e){var n=r.useContext(u),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},p=function(e){var n=o(e.components);return r.createElement(u.Provider,{value:n},e.children)},m={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},c=r.forwardRef((function(e,n){var t=e.components,s=e.mdxType,a=e.originalType,u=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),c=o(t),d=s,k=c["".concat(u,".").concat(d)]||c[d]||m[d]||a;return t?r.createElement(k,l(l({ref:n},p),{},{components:t})):r.createElement(k,l({ref:n},p))}));function d(e,n){var t=arguments,s=n&&n.mdxType;if("string"==typeof e||s){var a=t.length,l=new Array(a);l[0]=c;var i={};for(var u in n)hasOwnProperty.call(n,u)&&(i[u]=n[u]);i.originalType=e,i.mdxType="string"==typeof e?e:s,l[1]=i;for(var o=2;o<a;o++)l[o]=t[o];return r.createElement.apply(null,l)}return r.createElement.apply(null,t)}c.displayName="MDXCreateElement"},64550:function(e,n,t){t.r(n),t.d(n,{assets:function(){return m},contentTitle:function(){return o},default:function(){return k},frontMatter:function(){return u},metadata:function(){return p},toc:function(){return c}});var r=t(83117),s=t(80102),a=(t(67294),t(3905)),l=t(44996),i=["components"],u={},o=void 0,p={unversionedId:"\u7cfb\u7edf\u6269\u5c55\u6307\u5357/\u6269\u5c55\u4f8b\u5b50",id:"\u7cfb\u7edf\u6269\u5c55\u6307\u5357/\u6269\u5c55\u4f8b\u5b50",title:"\u6269\u5c55\u4f8b\u5b50",description:"\u7ec8\u7aef\u811a\u672c",source:"@site/docs/\u7cfb\u7edf\u6269\u5c55\u6307\u5357/\u6269\u5c55\u4f8b\u5b50.md",sourceDirName:"\u7cfb\u7edf\u6269\u5c55\u6307\u5357",slug:"/\u7cfb\u7edf\u6269\u5c55\u6307\u5357/\u6269\u5c55\u4f8b\u5b50",permalink:"/docs/next/\u7cfb\u7edf\u6269\u5c55\u6307\u5357/\u6269\u5c55\u4f8b\u5b50",draft:!1,editUrl:"https://github.com/iDongMobility/imgenius-docs/edit/master/docs/\u7cfb\u7edf\u6269\u5c55\u6307\u5357/\u6269\u5c55\u4f8b\u5b50.md",tags:[],version:"current",lastUpdatedAt:1665643810,formattedLastUpdatedAt:"10/13/2022",frontMatter:{},sidebar:"someSidebar",previous:{title:"\u81ea\u5b9a\u4e49\u670d\u52a1\u6269\u5c55\u5f00\u53d1",permalink:"/docs/next/\u7cfb\u7edf\u6269\u5c55\u6307\u5357/\u81ea\u5b9a\u4e49\u670d\u52a1\u6269\u5c55\u5f00\u53d1"},next:{title:"\u540c\u6b65\u548c\u4f7f\u7528\u81ea\u5b9a\u4e49\u6570\u636e",permalink:"/docs/next/\u7cfb\u7edf\u6269\u5c55\u6307\u5357/\u540c\u6b65\u548c\u4f7f\u7528\u81ea\u5b9a\u4e49\u6570\u636e"}},m={},c=[{value:"\u7ec8\u7aef\u811a\u672c",id:"\u7ec8\u7aef\u811a\u672c",level:2},{value:"\u6253\u5f00\u4f5c\u4e1a\u7ec4\u76f4\u63a5\u8df3\u5230\u6307\u5b9a\u4f5c\u4e1a",id:"\u6253\u5f00\u4f5c\u4e1a\u7ec4\u76f4\u63a5\u8df3\u5230\u6307\u5b9a\u4f5c\u4e1a",level:3},{value:"\u9700\u6c42\u63cf\u8ff0",id:"\u9700\u6c42\u63cf\u8ff0",level:4},{value:"\u811a\u672c\u4ee3\u7801",id:"\u811a\u672c\u4ee3\u7801",level:4},{value:"\u6839\u636e\u7269\u6599\u540d\u548c\u7269\u6599\u5c5e\u6027\u83b7\u53d6\u6307\u5b9a\u7269\u6599\u5c5e\u6027\u503c",id:"\u6839\u636e\u7269\u6599\u540d\u548c\u7269\u6599\u5c5e\u6027\u83b7\u53d6\u6307\u5b9a\u7269\u6599\u5c5e\u6027\u503c",level:3},{value:"\u9700\u6c42\u63cf\u8ff0",id:"\u9700\u6c42\u63cf\u8ff0-1",level:4},{value:"\u811a\u672c\u4ee3\u7801",id:"\u811a\u672c\u4ee3\u7801-1",level:4},{value:"\u6839\u636e\u4f5c\u4e1a\u72b6\u6001\u68c0\u67e5\u7684\u503c\uff0c\u81ea\u52a8\u586b\u5199\u4f5c\u4e1a\u9879\u7684\u503c",id:"\u6839\u636e\u4f5c\u4e1a\u72b6\u6001\u68c0\u67e5\u7684\u503c\u81ea\u52a8\u586b\u5199\u4f5c\u4e1a\u9879\u7684\u503c",level:3},{value:"\u9700\u6c42\u63cf\u8ff0",id:"\u9700\u6c42\u63cf\u8ff0-2",level:4},{value:"\u811a\u672c\u4ee3\u7801",id:"\u811a\u672c\u4ee3\u7801-2",level:4},{value:"\u667a\u80fd\u7535\u5b50\u9501\u5f00\u9501\u914d\u7f6e",id:"\u667a\u80fd\u7535\u5b50\u9501\u5f00\u9501\u914d\u7f6e",level:3},{value:"\u9700\u6c42\u63cf\u8ff0",id:"\u9700\u6c42\u63cf\u8ff0-3",level:4},{value:"\u811a\u672c\u4ee3\u7801",id:"\u811a\u672c\u4ee3\u7801-3",level:4},{value:"\u66f4\u65b0\u4f5c\u4e1a\u5173\u8054\u8d44\u4ea7\u7684\u6307\u5b9a\u8d44\u4ea7\u5c5e\u6027\u503c",id:"\u66f4\u65b0\u4f5c\u4e1a\u5173\u8054\u8d44\u4ea7\u7684\u6307\u5b9a\u8d44\u4ea7\u5c5e\u6027\u503c",level:3},{value:"\u9700\u6c42\u63cf\u8ff0",id:"\u9700\u6c42\u63cf\u8ff0-4",level:4},{value:"\u811a\u672c\u4ee3\u7801",id:"\u811a\u672c\u4ee3\u7801-4",level:4},{value:"\u6253\u5f00\u4f5c\u4e1a\u7ec4\u76f4\u63a5\u8df3\u8f6c\u5230\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u9875\u9762",id:"\u6253\u5f00\u4f5c\u4e1a\u7ec4\u76f4\u63a5\u8df3\u8f6c\u5230\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u9875\u9762",level:3},{value:"\u9700\u6c42\u63cf\u8ff0",id:"\u9700\u6c42\u63cf\u8ff0-5",level:4},{value:"\u811a\u672c\u4ee3\u7801",id:"\u811a\u672c\u4ee3\u7801-5",level:4},{value:"\u6839\u636e\u8d44\u4ea7\u540d\u83b7\u53d6\u7684\u8d44\u4ea7\u53f7\u503c\u8d4b\u503c\u7ed9\u4f5c\u4e1a\u9879\u9ed8\u8ba4\u503c\u7684\u811a\u672c",id:"\u6839\u636e\u8d44\u4ea7\u540d\u83b7\u53d6\u7684\u8d44\u4ea7\u53f7\u503c\u8d4b\u503c\u7ed9\u4f5c\u4e1a\u9879\u9ed8\u8ba4\u503c\u7684\u811a\u672c",level:3},{value:"\u9700\u6c42\u63cf\u8ff0",id:"\u9700\u6c42\u63cf\u8ff0-6",level:4},{value:"\u811a\u672c\u4ee3\u7801",id:"\u811a\u672c\u4ee3\u7801-6",level:4},{value:"\u5224\u65ad\u5f53\u524d\u767b\u9646\u4eba\u53ef\u6267\u884c\u4f5c\u4e1a\u7ec4\u6570\u91cf\u5927\u4e8e5\u65f6\u8fd4\u56deture",id:"\u5224\u65ad\u5f53\u524d\u767b\u9646\u4eba\u53ef\u6267\u884c\u4f5c\u4e1a\u7ec4\u6570\u91cf\u5927\u4e8e5\u65f6\u8fd4\u56deture",level:3},{value:"\u9700\u6c42\u63cf\u8ff0",id:"\u9700\u6c42\u63cf\u8ff0-7",level:4},{value:"\u811a\u672c\u4ee3\u7801",id:"\u811a\u672c\u4ee3\u7801-7",level:4},{value:"\u6839\u636e\u8bbe\u5907\u7684\u8fd0\u884c\u65f6\u957f\uff0c\u81ea\u52a8\u8ba1\u7b97\u51fa\u6da6\u6ed1\u5bff\u547d",id:"\u6839\u636e\u8bbe\u5907\u7684\u8fd0\u884c\u65f6\u957f\u81ea\u52a8\u8ba1\u7b97\u51fa\u6da6\u6ed1\u5bff\u547d",level:3},{value:"\u9700\u6c42\u63cf\u8ff0",id:"\u9700\u6c42\u63cf\u8ff0-8",level:4},{value:"\u811a\u672c\u4ee3\u7801",id:"\u811a\u672c\u4ee3\u7801-8",level:4},{value:"\u52a8\u706b\u4f5c\u4e1a\u4e2d\uff0c\u5224\u65ad\u5177\u6709MAC\u5730\u5740\u7684\u5b9a\u4f4d\u7ec8\u7aef\u662f\u5426\u5728\u56f4\u680f\u5185",id:"\u52a8\u706b\u4f5c\u4e1a\u4e2d\u5224\u65ad\u5177\u6709mac\u5730\u5740\u7684\u5b9a\u4f4d\u7ec8\u7aef\u662f\u5426\u5728\u56f4\u680f\u5185",level:3},{value:"\u9700\u6c42\u63cf\u8ff0",id:"\u9700\u6c42\u63cf\u8ff0-9",level:4},{value:"\u811a\u672c\u4ee3\u7801",id:"\u811a\u672c\u4ee3\u7801-9",level:4},{value:"\u4e00\u4e2ajson\u7c7b\u578b\u4f5c\u4e1a\u9879\u4e2d\u67d0\u5c5e\u6027\u76f8\u52a0\u8d4b\u7ed9\u53e6\u4e00\u4f5c\u4e1a\u9879\u9ed8\u8ba4\u503c",id:"\u4e00\u4e2ajson\u7c7b\u578b\u4f5c\u4e1a\u9879\u4e2d\u67d0\u5c5e\u6027\u76f8\u52a0\u8d4b\u7ed9\u53e6\u4e00\u4f5c\u4e1a\u9879\u9ed8\u8ba4\u503c",level:3},{value:"\u9700\u6c42\u63cf\u8ff0",id:"\u9700\u6c42\u63cf\u8ff0-10",level:4},{value:"\u811a\u672c\u4ee3\u7801",id:"\u811a\u672c\u4ee3\u7801-10",level:4},{value:"\u83b7\u53d6\u6307\u5b9a\u4f5c\u4e1a\u9879\u503c\uff0c\u66f4\u65b0\u5230\u6307\u5b9a\u4f5c\u4e1a\u7ec4\u5c5e\u6027",id:"\u83b7\u53d6\u6307\u5b9a\u4f5c\u4e1a\u9879\u503c\u66f4\u65b0\u5230\u6307\u5b9a\u4f5c\u4e1a\u7ec4\u5c5e\u6027",level:3},{value:"\u9700\u6c42\u63cf\u8ff0",id:"\u9700\u6c42\u63cf\u8ff0-11",level:4},{value:"\u811a\u672c\u4ee3\u7801",id:"\u811a\u672c\u4ee3\u7801-11",level:4},{value:"\u6839\u636e\u8d44\u4ea7\u53f7\uff0c\u83b7\u53d6\u6307\u5b9a\u8d44\u4ea7\u5c5e\u6027\u503c",id:"\u6839\u636e\u8d44\u4ea7\u53f7\u83b7\u53d6\u6307\u5b9a\u8d44\u4ea7\u5c5e\u6027\u503c",level:3},{value:"\u9700\u6c42\u63cf\u8ff0",id:"\u9700\u6c42\u63cf\u8ff0-12",level:4},{value:"\u811a\u672c\u4ee3\u7801",id:"\u811a\u672c\u4ee3\u7801-12",level:4},{value:"\u6839\u636e\u5f53\u524d\u4f5c\u4e1a\u9879\u503c\u627e\u5230\u5f53\u5929\u6307\u5b9a\u4f5c\u4e1a\u7ec4\u7684\u7c7b\u578b",id:"\u6839\u636e\u5f53\u524d\u4f5c\u4e1a\u9879\u503c\u627e\u5230\u5f53\u5929\u6307\u5b9a\u4f5c\u4e1a\u7ec4\u7684\u7c7b\u578b",level:3},{value:"\u9700\u6c42\u63cf\u8ff0",id:"\u9700\u6c42\u63cf\u8ff0-13",level:4},{value:"\u811a\u672c\u4ee3\u7801",id:"\u811a\u672c\u4ee3\u7801-13",level:4},{value:"\u6bd4\u8f83json\u5b57\u7b26\u4e32\u7c7b\u578b\u4f5c\u4e1a\u9879\u4e2d\u4e24\u9879\u7684\u503c\uff0c\u6570\u91cf\u4e0d\u540c\u65f6\u63d0\u9192",id:"\u6bd4\u8f83json\u5b57\u7b26\u4e32\u7c7b\u578b\u4f5c\u4e1a\u9879\u4e2d\u4e24\u9879\u7684\u503c\u6570\u91cf\u4e0d\u540c\u65f6\u63d0\u9192",level:3},{value:"\u9700\u6c42\u63cf\u8ff0",id:"\u9700\u6c42\u63cf\u8ff0-14",level:4},{value:"\u811a\u672c\u4ee3\u7801",id:"\u811a\u672c\u4ee3\u7801-14",level:4},{value:"\u5c06\u903b\u8f91\u62cd\u7167\u7684\u7167\u7247\u590d\u5236\u5230\u67d0\u4e2a\u6587\u4ef6\u7c7b\u578b\u7684\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u4e2d",id:"\u5c06\u903b\u8f91\u62cd\u7167\u7684\u7167\u7247\u590d\u5236\u5230\u67d0\u4e2a\u6587\u4ef6\u7c7b\u578b\u7684\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u4e2d",level:3},{value:"\u9700\u6c42\u63cf\u8ff0",id:"\u9700\u6c42\u63cf\u8ff0-15",level:4},{value:"\u811a\u672c\u4ee3\u7801",id:"\u811a\u672c\u4ee3\u7801-15",level:4},{value:"\u7ec8\u7aefjson\u91cc\u4fee\u6539\u503c\u540e\u811a\u672c\u53ef\u4ee5\u81ea\u52a8\u65b0\u589e\u4e00\u4e2ajson\u6570\u7ec4",id:"\u7ec8\u7aefjson\u91cc\u4fee\u6539\u503c\u540e\u811a\u672c\u53ef\u4ee5\u81ea\u52a8\u65b0\u589e\u4e00\u4e2ajson\u6570\u7ec4",level:3},{value:"\u9700\u6c42\u63cf\u8ff0",id:"\u9700\u6c42\u63cf\u8ff0-16",level:4},{value:"\u811a\u672c\u4ee3\u7801",id:"\u811a\u672c\u4ee3\u7801-16",level:4},{value:"\u7ec8\u7aefjson\u91cc\u4fee\u6539\u503c\u540e\u811a\u672c\u53ef\u4ee5\u5c06\u5149\u6807\u8df3\u8f6c\u5230\u4e0b\u4e00\u9879\u6216\u6307\u5b9a\u540d\u79f0\u7684\u9879",id:"\u7ec8\u7aefjson\u91cc\u4fee\u6539\u503c\u540e\u811a\u672c\u53ef\u4ee5\u5c06\u5149\u6807\u8df3\u8f6c\u5230\u4e0b\u4e00\u9879\u6216\u6307\u5b9a\u540d\u79f0\u7684\u9879",level:3},{value:"\u9700\u6c42\u63cf\u8ff0",id:"\u9700\u6c42\u63cf\u8ff0-17",level:4},{value:"\u811a\u672c\u4ee3\u7801",id:"\u811a\u672c\u4ee3\u7801-17",level:4},{value:"\u6839\u636e\u4f5c\u4e1a\u5173\u8054\u8d44\u4ea7\u4e0b\u7684\u5b50\u8d44\u4ea7\u81ea\u52a8\u65b0\u5efa\u4f5c\u4e1a\u89c4\u8303\u5f15\u7528",id:"\u6839\u636e\u4f5c\u4e1a\u5173\u8054\u8d44\u4ea7\u4e0b\u7684\u5b50\u8d44\u4ea7\u81ea\u52a8\u65b0\u5efa\u4f5c\u4e1a\u89c4\u8303\u5f15\u7528",level:3},{value:"\u9700\u6c42\u63cf\u8ff0",id:"\u9700\u6c42\u63cf\u8ff0-18",level:4},{value:"\u811a\u672c\u4ee3\u7801",id:"\u811a\u672c\u4ee3\u7801-18",level:4},{value:"\u5f97\u5230\u5f53\u524d\u767b\u5f55\u7528\u6237\u5f85\u6267\u884c\u548c\u6267\u884c\u4e2d\u4f5c\u4e1a\u7ec4\u540d\u79f0\uff0c\u8fd4\u56de\u53ef\u9009\u9879\u5217\u8868",id:"\u5f97\u5230\u5f53\u524d\u767b\u5f55\u7528\u6237\u5f85\u6267\u884c\u548c\u6267\u884c\u4e2d\u4f5c\u4e1a\u7ec4\u540d\u79f0\u8fd4\u56de\u53ef\u9009\u9879\u5217\u8868",level:3},{value:"\u9700\u6c42\u63cf\u8ff0",id:"\u9700\u6c42\u63cf\u8ff0-19",level:4},{value:"\u811a\u672c\u4ee3\u7801",id:"\u811a\u672c\u4ee3\u7801-19",level:4},{value:"Web\u7aef\u811a\u672c",id:"web\u7aef\u811a\u672c",level:2},{value:"\u5f97\u5230\u8d44\u4ea7\u7684\u6240\u6709\u5b50\u5b59\uff0c\u8fd4\u56de\u8d44\u4ea7\u540d\u7684\u5217\u8868",id:"\u5f97\u5230\u8d44\u4ea7\u7684\u6240\u6709\u5b50\u5b59\u8fd4\u56de\u8d44\u4ea7\u540d\u7684\u5217\u8868",level:3},{value:"\u9700\u6c42\u63cf\u8ff0",id:"\u9700\u6c42\u63cf\u8ff0-20",level:4},{value:"\u811a\u672c\u4ee3\u7801",id:"\u811a\u672c\u4ee3\u7801-20",level:4},{value:"\u5f97\u5230\u56fa\u5b9a\u7ec4\u7ec7\u5355\u5143\u7684\u76f4\u63a5\u513f\u5b50\uff0c\u6b64\u5916\u52a0\u4e00\u4e2a\u56fa\u5b9a\u7684\u5b57\u7b26\u4e32\uff0c\u8fd4\u56de\u5217\u8868",id:"\u5f97\u5230\u56fa\u5b9a\u7ec4\u7ec7\u5355\u5143\u7684\u76f4\u63a5\u513f\u5b50\u6b64\u5916\u52a0\u4e00\u4e2a\u56fa\u5b9a\u7684\u5b57\u7b26\u4e32\u8fd4\u56de\u5217\u8868",level:3},{value:"\u9700\u6c42\u63cf\u8ff0",id:"\u9700\u6c42\u63cf\u8ff0-21",level:4},{value:"\u811a\u672c\u4ee3\u7801",id:"\u811a\u672c\u4ee3\u7801-21",level:4},{value:"\u7ec4\u7ec7\u5355\u5143\u5c5e\u4e8e\u767b\u5f55\u4eba\u7ec4\u7ec7\u5355\u5143\uff0c\u5c97\u4f4d\u4e3a\u56fa\u5b9a\u540d\u79f0\uff0c\u6240\u6709\u4eba\u5217\u8868",id:"\u7ec4\u7ec7\u5355\u5143\u5c5e\u4e8e\u767b\u5f55\u4eba\u7ec4\u7ec7\u5355\u5143\u5c97\u4f4d\u4e3a\u56fa\u5b9a\u540d\u79f0\u6240\u6709\u4eba\u5217\u8868",level:3},{value:"\u9700\u6c42\u63cf\u8ff0",id:"\u9700\u6c42\u63cf\u8ff0-22",level:4},{value:"\u811a\u672c\u4ee3\u7801",id:"\u811a\u672c\u4ee3\u7801-22",level:4},{value:"\u7ec4\u7ec7\u5355\u5143\u5c5e\u4e8e\u4f5c\u4e1a\u7ec4\u7ec4\u7ec7\u5355\u5143\uff0c\u5c97\u4f4d\u4e3a\u56fa\u5b9a\u540d\u79f0\uff0c \u6240\u6709\u4eba\u5217\u8868",id:"\u7ec4\u7ec7\u5355\u5143\u5c5e\u4e8e\u4f5c\u4e1a\u7ec4\u7ec4\u7ec7\u5355\u5143\u5c97\u4f4d\u4e3a\u56fa\u5b9a\u540d\u79f0-\u6240\u6709\u4eba\u5217\u8868",level:3},{value:"\u9700\u6c42\u63cf\u8ff0",id:"\u9700\u6c42\u63cf\u8ff0-23",level:4},{value:"\u811a\u672c\u4ee3\u7801",id:"\u811a\u672c\u4ee3\u7801-23",level:4},{value:"\u6839\u636e\u540d\u79f0\u627e\u5230\u5bf9\u5e94\u8d44\u4ea7\uff0c\u5c06\u6b64\u8d44\u4ea7\u7684\u67d0\u4e00\u5c5e\u6027\u66f4\u65b0\u5230\u53e6\u4e00\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u91cc",id:"\u6839\u636e\u540d\u79f0\u627e\u5230\u5bf9\u5e94\u8d44\u4ea7\u5c06\u6b64\u8d44\u4ea7\u7684\u67d0\u4e00\u5c5e\u6027\u66f4\u65b0\u5230\u53e6\u4e00\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u91cc",level:3},{value:"\u9700\u6c42\u63cf\u8ff0",id:"\u9700\u6c42\u63cf\u8ff0-24",level:4},{value:"\u811a\u672c\u4ee3\u7801",id:"\u811a\u672c\u4ee3\u7801-24",level:4},{value:"\u6839\u636e\u4eba\u5458\u540d\u79f0\u67e5\u627e\u4eba\u5458\u67d0\u4e00\u5c5e\u6027\uff08\u66f4\u591a\u5c5e\u6027\uff09\u66f4\u65b0\u5230\u53e6\u4e00\u4e2a\u4f5c\u4e1a\u7ec4\u5c5e\u6027",id:"\u6839\u636e\u4eba\u5458\u540d\u79f0\u67e5\u627e\u4eba\u5458\u67d0\u4e00\u5c5e\u6027\u66f4\u591a\u5c5e\u6027\u66f4\u65b0\u5230\u53e6\u4e00\u4e2a\u4f5c\u4e1a\u7ec4\u5c5e\u6027",level:3},{value:"\u9700\u6c42\u63cf\u8ff0",id:"\u9700\u6c42\u63cf\u8ff0-25",level:4},{value:"\u811a\u672c\u4ee3\u7801",id:"\u811a\u672c\u4ee3\u7801-25",level:4},{value:"\u6309\u7167\u5217\u8868\u540d\u5f97\u5230\u5217\u8868\u9879",id:"\u6309\u7167\u5217\u8868\u540d\u5f97\u5230\u5217\u8868\u9879",level:3},{value:"\u9700\u6c42\u63cf\u8ff0",id:"\u9700\u6c42\u63cf\u8ff0-26",level:4},{value:"\u811a\u672c\u4ee3\u7801",id:"\u811a\u672c\u4ee3\u7801-26",level:4},{value:"\u6309\u7167id\u5f97\u5230\u5217\u8868\u9879\u7684\u540d\u79f0",id:"\u6309\u7167id\u5f97\u5230\u5217\u8868\u9879\u7684\u540d\u79f0",level:3},{value:"\u9700\u6c42\u63cf\u8ff0",id:"\u9700\u6c42\u63cf\u8ff0-27",level:4},{value:"\u811a\u672c\u4ee3\u7801",id:"\u811a\u672c\u4ee3\u7801-27",level:4},{value:"\u9000\u6599\u660e\u7ec6 - \u5b9e\u9645\u9000\u6599 = \u9000\u6599\u5dee\u989d",id:"\u9000\u6599\u660e\u7ec6---\u5b9e\u9645\u9000\u6599--\u9000\u6599\u5dee\u989d",level:3},{value:"\u9700\u6c42\u63cf\u8ff0",id:"\u9700\u6c42\u63cf\u8ff0-28",level:4},{value:"\u811a\u672c\u4ee3\u7801",id:"\u811a\u672c\u4ee3\u7801-28",level:4},{value:"\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u4e3ajson\uff0c\u64cd\u4f5c\u9879\u4e0b\u6709\u6807\u51c6\u4ef7\u683c\u5e76\u4e14\u5927\u4e8e200\u65f6\uff0c\u66f4\u65b0\u53e6\u4e00\u4e2a\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u4e3a&#39;\u662f&#39;",id:"\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u4e3ajson\u64cd\u4f5c\u9879\u4e0b\u6709\u6807\u51c6\u4ef7\u683c\u5e76\u4e14\u5927\u4e8e200\u65f6\u66f4\u65b0\u53e6\u4e00\u4e2a\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u4e3a\u662f",level:3},{value:"\u9700\u6c42\u63cf\u8ff0",id:"\u9700\u6c42\u63cf\u8ff0-29",level:4},{value:"\u811a\u672c\u4ee3\u7801",id:"\u811a\u672c\u4ee3\u7801-29",level:4},{value:"\u7b5b\u9009\u51fa\u7ec4\u7ec7\u5355\u5143\u5c5e\u4e8ea\uff0c\u5c97\u4f4d\u7ef4\u4fee+ \u7ec4\u7ec7\u5355\u5143\u5c5e\u4e8eb\uff0c\u5c97\u4f4d\u4e3a\u73ed\u957f\u7684\u4eba\u7684\u96c6\u5408",id:"\u7b5b\u9009\u51fa\u7ec4\u7ec7\u5355\u5143\u5c5e\u4e8ea\u5c97\u4f4d\u7ef4\u4fee-\u7ec4\u7ec7\u5355\u5143\u5c5e\u4e8eb\u5c97\u4f4d\u4e3a\u73ed\u957f\u7684\u4eba\u7684\u96c6\u5408",level:3},{value:"\u9700\u6c42\u63cf\u8ff0",id:"\u9700\u6c42\u63cf\u8ff0-30",level:4},{value:"\u811a\u672c\u4ee3\u7801",id:"\u811a\u672c\u4ee3\u7801-30",level:4},{value:"EOC\u9009\u62e9\u5c5e\u4e8e\u67d0\u7ec4\u7ec7\u5355\u5143\u548c\u67d0\u5c97\u4f4d\u7684\u4eba\uff0c\u663e\u793a\u662f\u5426\u5728\u5c97\uff08\u4e0d\u5728\u5c97\u6700\u540e\u6392\u5217\uff09\uff0c\u663e\u793a\u5728\u624b\u5de5\u5355\u6570\uff08\u987a\u5e8f\u6392\u5217\uff09",id:"eoc\u9009\u62e9\u5c5e\u4e8e\u67d0\u7ec4\u7ec7\u5355\u5143\u548c\u67d0\u5c97\u4f4d\u7684\u4eba\u663e\u793a\u662f\u5426\u5728\u5c97\u4e0d\u5728\u5c97\u6700\u540e\u6392\u5217\u663e\u793a\u5728\u624b\u5de5\u5355\u6570\u987a\u5e8f\u6392\u5217",level:3},{value:"\u9700\u6c42\u63cf\u8ff0",id:"\u9700\u6c42\u63cf\u8ff0-31",level:4},{value:"\u811a\u672c\u4ee3\u7801",id:"\u811a\u672c\u4ee3\u7801-31",level:4},{value:"EOC\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u4e2d\u9009\u62e9\u67d0\u7ec4\u7ec7\u5355\u5143\u540e\uff0c\u81ea\u52a8\u5c06\u5c5e\u4e8e\u7ec4\u7ec7\u5355\u5143\u7684\u7528\u6237\u586b\u5165\u53e6\u4e00\u4e2a\u4f5c\u4e1a\u7ec4\u5c5e\u6027",id:"eoc\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u4e2d\u9009\u62e9\u67d0\u7ec4\u7ec7\u5355\u5143\u540e\u81ea\u52a8\u5c06\u5c5e\u4e8e\u7ec4\u7ec7\u5355\u5143\u7684\u7528\u6237\u586b\u5165\u53e6\u4e00\u4e2a\u4f5c\u4e1a\u7ec4\u5c5e\u6027",level:3},{value:"\u9700\u6c42\u63cf\u8ff0",id:"\u9700\u6c42\u63cf\u8ff0-32",level:4},{value:"\u811a\u672c\u4ee3\u7801",id:"\u811a\u672c\u4ee3\u7801-32",level:4},{value:"\u6570\u636e\u7c7b\u578b\u4e3ajson\u5b57\u7b26\u4e32\u7684\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u4fee\u6539\u540e\uff0c\u81ea\u52a8\u5c06\u503c\u586b\u5165\u53e6\u4e00\u4e2aJson\u5b57\u7b26\u4e32\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u4e2d",id:"\u6570\u636e\u7c7b\u578b\u4e3ajson\u5b57\u7b26\u4e32\u7684\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u4fee\u6539\u540e\u81ea\u52a8\u5c06\u503c\u586b\u5165\u53e6\u4e00\u4e2ajson\u5b57\u7b26\u4e32\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u4e2d",level:3},{value:"\u9700\u6c42\u63cf\u8ff0",id:"\u9700\u6c42\u63cf\u8ff0-33",level:4},{value:"\u811a\u672c\u4ee3\u7801",id:"\u811a\u672c\u4ee3\u7801-33",level:4},{value:"\u6570\u636e\u7c7b\u578b\u4e3a\u53ef\u8f93\u5165\u5217\u8868\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u7f16\u8f91\u65f6\u9009\u62e9\u8f93\u5165\u540e\uff0c\u81ea\u52a8\u5c06\u8f93\u5165\u7684\u5185\u5bb9\u4f5c\u4e3a\u5217\u8868\u9879\u65b0\u5efa\u5230\u5217\u8868\u4e2d",id:"\u6570\u636e\u7c7b\u578b\u4e3a\u53ef\u8f93\u5165\u5217\u8868\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u7f16\u8f91\u65f6\u9009\u62e9\u8f93\u5165\u540e\u81ea\u52a8\u5c06\u8f93\u5165\u7684\u5185\u5bb9\u4f5c\u4e3a\u5217\u8868\u9879\u65b0\u5efa\u5230\u5217\u8868\u4e2d",level:3},{value:"\u9700\u6c42\u63cf\u8ff0",id:"\u9700\u6c42\u63cf\u8ff0-34",level:4},{value:"\u811a\u672c\u4ee3\u7801",id:"\u811a\u672c\u4ee3\u7801-34",level:4},{value:"\u6d3b\u52a8\u7ed3\u675f\u540e\uff0c\u5c06\u6307\u5b9a\u7684\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u8d4b\u503c\u5230\u6307\u5b9a\u8d44\u4ea7\u7684\u540c\u540d\u5c5e\u6027\u4e2d",id:"\u6d3b\u52a8\u7ed3\u675f\u540e\u5c06\u6307\u5b9a\u7684\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u8d4b\u503c\u5230\u6307\u5b9a\u8d44\u4ea7\u7684\u540c\u540d\u5c5e\u6027\u4e2d",level:3},{value:"\u9700\u6c42\u63cf\u8ff0",id:"\u9700\u6c42\u63cf\u8ff0-35",level:4},{value:"\u811a\u672c\u4ee3\u7801",id:"\u811a\u672c\u4ee3\u7801-35",level:4},{value:"\u6d3b\u52a8\u7ed3\u675f\u540e\uff0c\u83b7\u53d6\u6307\u5b9a\u8d44\u4ea7\u7684\u5c5e\u6027\u5e76\u4fee\u6539\u5c5e\u6027\u503c",id:"\u6d3b\u52a8\u7ed3\u675f\u540e\u83b7\u53d6\u6307\u5b9a\u8d44\u4ea7\u7684\u5c5e\u6027\u5e76\u4fee\u6539\u5c5e\u6027\u503c",level:3},{value:"\u9700\u6c42\u63cf\u8ff0",id:"\u9700\u6c42\u63cf\u8ff0-36",level:4},{value:"\u811a\u672c\u4ee3\u7801",id:"\u811a\u672c\u4ee3\u7801-36",level:4},{value:"\u6839\u636e\u6307\u5b9a\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u7684\u5217\u8868\u9879\u503c\u548c\u53c2\u4e0e\u4eba\u5458\u7684\u9009\u62e9\u6570\u91cf\u751f\u6210\u591a\u4e2a\u8ba1\u5212\uff0c\u5e76\u6839\u636e\u53c2\u4e0e\u4eba\u5458\u7684\u503c\u4e3a\u6bcf\u4e00\u4e2a\u8ba1\u5212\u6307\u5b9a\u4e00\u4e2a\u6267\u884c\u4eba",id:"\u6839\u636e\u6307\u5b9a\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u7684\u5217\u8868\u9879\u503c\u548c\u53c2\u4e0e\u4eba\u5458\u7684\u9009\u62e9\u6570\u91cf\u751f\u6210\u591a\u4e2a\u8ba1\u5212\u5e76\u6839\u636e\u53c2\u4e0e\u4eba\u5458\u7684\u503c\u4e3a\u6bcf\u4e00\u4e2a\u8ba1\u5212\u6307\u5b9a\u4e00\u4e2a\u6267\u884c\u4eba",level:3},{value:"\u9700\u6c42\u63cf\u8ff0",id:"\u9700\u6c42\u63cf\u8ff0-37",level:4},{value:"\u811a\u672c\u4ee3\u7801",id:"\u811a\u672c\u4ee3\u7801-37",level:4}],d={toc:c};function k(e){var n=e.components,t=(0,s.Z)(e,i);return(0,a.kt)("wrapper",(0,r.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"\u7ec8\u7aef\u811a\u672c"},"\u7ec8\u7aef\u811a\u672c"),(0,a.kt)("h3",{id:"\u6253\u5f00\u4f5c\u4e1a\u7ec4\u76f4\u63a5\u8df3\u5230\u6307\u5b9a\u4f5c\u4e1a"},"\u6253\u5f00\u4f5c\u4e1a\u7ec4\u76f4\u63a5\u8df3\u5230\u6307\u5b9a\u4f5c\u4e1a"),(0,a.kt)("h4",{id:"\u9700\u6c42\u63cf\u8ff0"},"\u9700\u6c42\u63cf\u8ff0"),(0,a.kt)("p",null,"\u4f5c\u4e1a\u7ec4\u4e2d\u6839\u636e\u6307\u5b9a\u7684\u4f5c\u4e1a\u540d\u8df3\u8f6c\u5230\u8be5\u4f5c\u4e1a"),(0,a.kt)("h4",{id:"\u811a\u672c\u4ee3\u7801"},"\u811a\u672c\u4ee3\u7801"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u9002\u7528\u4e8e\u914d\u7f6e\u903b\u8f91\u4e2d\u7684\u811a\u672c\uff0c\u4e0d\u652f\u6301\u6253\u5f00\u811a\u672c\u3001\u5173\u95ed\u811a\u672c\u53ca\u663e\u793a\u540e\u811a\u672c")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"\nvar curAllTasks = ScriptEngine.Context.GetCurTasks();\nif (curAllTasks && curAllTasks.length > 0) {\n var needJumpTask = _.find(curAllTasks, function(_task){\n  return _task.Name == '\u8df3\u8f6c\u7684\u4f5c\u4e1a\u540d';\n });\n if(needJumpTask){\n  page.executeTaskTree.JumpTask(needJumpTask);  \n }\n}\nreturn true;\n\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u9002\u7528\u4e8e\u5f85\u6267\u884c\uff0c\u6267\u884c\u4e2d\u7684\u4f5c\u4e1a\u7ec4\u811a\u672c")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"\nvar curAllTasks = ScriptEngine.Context.GetCurTasks();\nif (curAllTasks && curAllTasks.length > 0) {\n var needJumpTask = _.find(curAllTasks,function(_task){\n  return _task.Name == '\u8df3\u8f6c\u7684\u4f5c\u4e1a\u540d';\n });\n if (needJumpTask) {\n  var taskGroup = ScriptEngine.Context.curTaskGroup;\n  if (taskGroup.Status != JobStatus.New) {\n   GlobalInfo.SetTaskGroupTaskParentID(taskGroup.ID, taskGroup.SequenceID, needJumpTask.ParentTaskID);\n   GlobalInfo.SetTaskGroupTaskID(taskGroup.ID, taskGroup.SequenceID, needJumpTask.ID);\n  }\n }\n}\nreturn true;\n\n")),(0,a.kt)("h3",{id:"\u6839\u636e\u7269\u6599\u540d\u548c\u7269\u6599\u5c5e\u6027\u83b7\u53d6\u6307\u5b9a\u7269\u6599\u5c5e\u6027\u503c"},"\u6839\u636e\u7269\u6599\u540d\u548c\u7269\u6599\u5c5e\u6027\u83b7\u53d6\u6307\u5b9a\u7269\u6599\u5c5e\u6027\u503c"),(0,a.kt)("h4",{id:"\u9700\u6c42\u63cf\u8ff0-1"},"\u9700\u6c42\u63cf\u8ff0"),(0,a.kt)("p",null,"\u6839\u636e\u7269\u6599\u7684\u540d\u79f0\u548c\u7269\u6599\u5c5e\u6027\u7684\u540d\u79f0\u83b7\u53d6\u8be5\u7269\u6599\u7684\u5c5e\u6027\u503c\uff0c\u8fd4\u56de\u4e3a\u6570\u7ec4"),(0,a.kt)("h4",{id:"\u811a\u672c\u4ee3\u7801-1"},"\u811a\u672c\u4ee3\u7801"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u9002\u7528\u4e8e\u4f5c\u4e1a\u9879\u5c5e\u6027\u4e2d\u7684\u53ef\u9009\u9879\u811a\u672c")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"\nvar resultName = ScriptEngine.GetResultName();\nvar materielID = 'fa4bbc96-0f8c-4f15-976a-b1022c0b5920';\nvar materielPropertyName = '\u51fa\u5e93\u539f\u5219';\nvar materielName = '\u8f6f\u57ab\uff0d\u6d88\u58f0\u5668';\nScriptEngine.GetAjaxToApiServer('Report', 'GetCustomReportColumn', 'id=' + materielID, null, 'get', function (_result) {\n  if(_result && _result.ColumnList && _result.ColumnList.length > 0){\n    var find = _result.ColumnList.find(function(_col){return _col.Title == materielPropertyName});\n    if(find){\n      var field = find.Field;\n      var isCustomData = false;\n      if(field && field.indexOf('CustomData_') > -1){\n        field = field.substring(11);\n        isCustomData = true;\n      }\n      ScriptEngine.GetAjaxToApiServer('Materiel', 'GetByName', 'name='+materielName, null, 'get',function(_response){\n        var list = [];\n        if(_response){\n          if(isCustomData && _response['CustomData'] && typeof _response['CustomData'][field] != 'undefined'){ \n            var value = _response['CustomData'][field];\n            list.push(value);\n          }else if(typeof _response[field] != 'undefined') {\n            var value = _response[field];\n            list.push(value);\n          }\n        }\n        ScriptEngine[resultName] = list;\n      });\n    }else{\n      ScriptEngine[resultName] = [];\n    }\n  }else{\n    ScriptEngine[resultName] = [];\n  }\n});\nreturn { 'ResultName':resultName};\n\n")),(0,a.kt)("h3",{id:"\u6839\u636e\u4f5c\u4e1a\u72b6\u6001\u68c0\u67e5\u7684\u503c\u81ea\u52a8\u586b\u5199\u4f5c\u4e1a\u9879\u7684\u503c"},"\u6839\u636e\u4f5c\u4e1a\u72b6\u6001\u68c0\u67e5\u7684\u503c\uff0c\u81ea\u52a8\u586b\u5199\u4f5c\u4e1a\u9879\u7684\u503c"),(0,a.kt)("h4",{id:"\u9700\u6c42\u63cf\u8ff0-2"},"\u9700\u6c42\u63cf\u8ff0"),(0,a.kt)("p",null,"\u4f5c\u4e1a\u9879\u4e0a\u662f\u914d\u7f6e\u4e86\u72b6\u6001\u68c0\u67e5\u7684\u4f5c\u4e1a\uff0c\u6839\u636e\u72b6\u6001\u68c0\u67e5\u7684\u503c\uff0c\u81ea\u52a8\u586b\u5199\u4f5c\u4e1a\u9879\u7684\u503c"),(0,a.kt)("h4",{id:"\u811a\u672c\u4ee3\u7801-2"},"\u811a\u672c\u4ee3\u7801"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u9002\u7528\u4e8e\u4f5c\u4e1a\u9879\u903b\u8f91\u4e2d\u7684\u6267\u884c\u811a\u672c")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"\nvar task = ScriptEngine.Context.curParentTask;\nif(task){\n  if(task.Tags && task.Tags.length > 0){\n    if(task.Tags[0].Value =='c95ce17b-313c-4097-8c2f-6169ae98cb7d'){    //\u81ea\u5b9a\u4e49\u5217\u8868\u4e2d\u7279\u62a4\u8fd0\u884c\u7684ID\n      ScriptEngine.Context.SetTaskAttributeValue(contextID,'Value','1')\n    } else{\n      ScriptEngine.Context.SetTaskAttributeValue(contextID,'Value','3')\n    }  \n  }\n}\nreturn true;\n\n")),(0,a.kt)("h3",{id:"\u667a\u80fd\u7535\u5b50\u9501\u5f00\u9501\u914d\u7f6e"},"\u667a\u80fd\u7535\u5b50\u9501\u5f00\u9501\u914d\u7f6e"),(0,a.kt)("h4",{id:"\u9700\u6c42\u63cf\u8ff0-3"},"\u9700\u6c42\u63cf\u8ff0"),(0,a.kt)("p",null,"\u4f5c\u4e1a\u9879\u4e3a\u667a\u80fd\u7535\u5b50\u9501\u7684\u5f00\u9501\uff0c\u4f7f\u7528\u6b64\u811a\u672c\u5b9e\u73b0\u5f00\u9501"),(0,a.kt)("h4",{id:"\u811a\u672c\u4ee3\u7801-3"},"\u811a\u672c\u4ee3\u7801"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u9002\u7528\u4e8e\u4f5c\u4e1a\u9879\u903b\u8f91\u4e2d\u7684\u6267\u884c\u811a\u672c")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"// \u901a\u8fc7\u5173\u8054\u5173\u7cfb\uff0c\u627e\u5230\u6307\u5b9a\u7684\u9501\uff0c\u8fdb\u884c\u5f00\u9501\nvar resultName = ScriptEngine.GetResultName();\nScriptEngine.Context.UnSmartLock('', function(_result){   //\u65b0\u4e00\u4ee3\u4e3aUnSmartLock2\n    ScriptEngine[resultName] = _result;\n});\nreturn { 'ResultName':resultName};\n\n")),(0,a.kt)("h3",{id:"\u66f4\u65b0\u4f5c\u4e1a\u5173\u8054\u8d44\u4ea7\u7684\u6307\u5b9a\u8d44\u4ea7\u5c5e\u6027\u503c"},"\u66f4\u65b0\u4f5c\u4e1a\u5173\u8054\u8d44\u4ea7\u7684\u6307\u5b9a\u8d44\u4ea7\u5c5e\u6027\u503c"),(0,a.kt)("h4",{id:"\u9700\u6c42\u63cf\u8ff0-4"},"\u9700\u6c42\u63cf\u8ff0"),(0,a.kt)("p",null,"\u66f4\u65b0\u4f5c\u4e1a\u6240\u5173\u8054\u7684\u8d44\u4ea7\u4e2d\u6570\u636e\u7c7b\u578b\u4e3a\u65e5\u671f\u65f6\u95f4\u7684\u6307\u5b9a\u8d44\u4ea7\u5c5e\u6027\u7684\u503c"),(0,a.kt)("h4",{id:"\u811a\u672c\u4ee3\u7801-4"},"\u811a\u672c\u4ee3\u7801"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u9002\u7528\u4e8e\u4f5c\u4e1a\u9879\u903b\u8f91\u4e2d\u7684\u6267\u884c\u811a\u672c")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"\nvar resultName = ScriptEngine.GetResultName();\nvar assetID = ScriptEngine.Context.GetTaskAssetID(ScriptEngine.Context.GetCurTask())\nCommon.AjaxToApiServer('Asset', 'GetAssetProperty', 'assetID='+assetID+'&propertyName=\u4e0a\u6b21\u4f5c\u4e1a\u5f00\u59cb\u65f6\u95f4', '', 'get', function (_isOk, _msg, _result) {\n if(_result){\n  var now = new Date();\n  var value = now.toString('yyyy-MM-dd HH:mm:ss');\n  Common.AjaxToApiServer('Asset', 'UpdateAssetPropertyValue', 'propertyID='+_result.ID+'&propertyValue=' + value, '', 'put', function (_isOk, _msg, _result) {\n   ScriptEngine[resultName] = _isOk;\n  });\n }\n else{\n  ScriptEngine[resultName] = false;\n }\n});\nreturn { 'ResultName':resultName};\n\n")),(0,a.kt)("h3",{id:"\u6253\u5f00\u4f5c\u4e1a\u7ec4\u76f4\u63a5\u8df3\u8f6c\u5230\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u9875\u9762"},"\u6253\u5f00\u4f5c\u4e1a\u7ec4\u76f4\u63a5\u8df3\u8f6c\u5230\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u9875\u9762"),(0,a.kt)("h4",{id:"\u9700\u6c42\u63cf\u8ff0-5"},"\u9700\u6c42\u63cf\u8ff0"),(0,a.kt)("p",null,"\u6253\u5f00\u4f5c\u4e1a\u7ec4\u65f6\u76f4\u63a5\u8df3\u8f6c\u5230\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u9875\u9762\u7684\u663e\u793a\u540e\u811a\u672c"),(0,a.kt)("h4",{id:"\u811a\u672c\u4ee3\u7801-5"},"\u811a\u672c\u4ee3\u7801"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u9002\u7528\u4e8e\u4f5c\u4e1a\u7ec4\u914d\u7f6e\u4e2d\u7684\u663e\u793a\u540e\u811a\u672c")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"\nif(window.showScriptIndex === 1){\n return true;\n}\nwindow.showScriptIndex = 1;\nvar setIconHtml = function(){\n  return function(){\n    if(executeTaskTree)\n  executeTaskTree.SetIconHtml();\n  }\n}\nvar completeTask = function(){\n  return function (_isSave, _value, _isNotupdateDisplay, _isNotNext) {\n  var task = ScriptEngine.Context.GetCurTask();\n    if(executeTaskTree)\n  executeTaskTree.CompleteTaskAndNext(task, _isSave, _value, !_isNotupdateDisplay, false, _isNotNext);\n }\n}\nvar curTaskChanged = function(_callback){\n  return function () {\n  executeTaskInfo.CurTaskChanged(_callback);\n }\n}\nvar jsonParseSafe = function (str) {\n  var res = null;\n  try {\n    if ((str.indexOf('{') >= 0 && str.indexOf('}') > 0) || str.indexOf('[') >= 0 && str.indexOf(']') > 0) {\n      res = JSON.parse(str);\n    }\n  }\n  catch (e) {\n    res = null;\n  }\n  return res;\n}\n\nvar tasks = ScriptEngine.Context.GetCurTasks();\nif(GlobalInfo.GetTaskGroupPageModel() == \"auto\"){\n  tasks = \n}\nvar selectedTask = _.find(tasks, function (_task) { return _task.Name == '\u5165\u5e931' });\nvar executeTaskInfo = new ExecuteTaskInfo(ScriptEngine.Context, completeTask(), setIconHtml());\nexecuteTaskInfo.inputValueBox = new InputValueBox('valueName',0);\nexecuteTaskInfo.inputValueBox.executeTaskCommon = ScriptEngine.Context;\nvar executeTaskTree = new ExecuteTaskTree(ScriptEngine.Context, 'divTaskTree', curTaskChanged( function () { }), null,null,null);\nexecuteTaskTree.JumpTask(selectedTask,selectedTask.ID);\nif(selectedTask){\nvar tag = selectedTask['Tags'][0];\n  var data = {\n    Json: tag && tag.DefaultValue ? jsonParseSafe(tag.DefaultValue) : '',\n    jsonFormat: tag && tag.Format ? jsonParseSafe(tag.Format) : '',\n    task: selectedTask,\n    title: selectedTask.Name,\n    inputID: 'customInputValue0'\n  }\n  var curView = plus.webview.currentWebview();\n  mui.openWindow({\n   url: 'JsonEditorView.html',\n   id: Common.NewGuid(),\n   extras: {\n     parentViewID: curView.id,\n     data: data\n   },\n   createNew: false\n });\n}\nreturn true;\n\n")),(0,a.kt)("h3",{id:"\u6839\u636e\u8d44\u4ea7\u540d\u83b7\u53d6\u7684\u8d44\u4ea7\u53f7\u503c\u8d4b\u503c\u7ed9\u4f5c\u4e1a\u9879\u9ed8\u8ba4\u503c\u7684\u811a\u672c"},"\u6839\u636e\u8d44\u4ea7\u540d\u83b7\u53d6\u7684\u8d44\u4ea7\u53f7\u503c\u8d4b\u503c\u7ed9\u4f5c\u4e1a\u9879\u9ed8\u8ba4\u503c\u7684\u811a\u672c"),(0,a.kt)("h4",{id:"\u9700\u6c42\u63cf\u8ff0-6"},"\u9700\u6c42\u63cf\u8ff0"),(0,a.kt)("p",null,"\u6839\u636e\u8d44\u4ea7\u540d\u83b7\u53d6\u7684\u8d44\u4ea7\u53f7\u503c\uff0c\u628a\u503c\u8d4b\u7ed9\u4f5c\u4e1a\u9879\u9ed8\u8ba4\u503c"),(0,a.kt)("h4",{id:"\u811a\u672c\u4ee3\u7801-6"},"\u811a\u672c\u4ee3\u7801"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u9002\u7528\u4e8e\u4f5c\u4e1a\u9879\u903b\u8f91\u4e2d\u7684\u6267\u884c\u811a\u672c")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"var resultName = ScriptEngine.GetResultName();\nScriptEngine.GetAjaxToApiServer('Asset', 'GetAssets', '', null, 'get',function(_result){\n var find = _.find(_result,function(_item){return _item.Name == '\u65b0\u8d44\u4ea71'});\n if(find){\n  ScriptEngine[resultName] = find.ID;\n  ScriptEngine.Context.SetTaskAttributeValue(contextID,'Value',find.ID)\n }\n});\n\nreturn { 'ResultName':resultName};\n\n")),(0,a.kt)("h3",{id:"\u5224\u65ad\u5f53\u524d\u767b\u9646\u4eba\u53ef\u6267\u884c\u4f5c\u4e1a\u7ec4\u6570\u91cf\u5927\u4e8e5\u65f6\u8fd4\u56deture"},"\u5224\u65ad\u5f53\u524d\u767b\u9646\u4eba\u53ef\u6267\u884c\u4f5c\u4e1a\u7ec4\u6570\u91cf\u5927\u4e8e5\u65f6\u8fd4\u56deture"),(0,a.kt)("h4",{id:"\u9700\u6c42\u63cf\u8ff0-7"},"\u9700\u6c42\u63cf\u8ff0"),(0,a.kt)("p",null,"\u8ba1\u7b97\u7ec8\u7aef\u5f53\u524d\u767b\u5f55\u4eba\u5458\u53ef\u6267\u884c\u7684\u4f5c\u4e1a\u7ec4\u6570\u91cf\u5e76\u5224\u65ad\uff0c\u5927\u4e8e5\u65f6\u8fd4\u56deture\uff0c\u672a\u63a5\u53d7\u4e0d\u7b97\u5728\u5185"),(0,a.kt)("h4",{id:"\u811a\u672c\u4ee3\u7801-7"},"\u811a\u672c\u4ee3\u7801"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u9002\u7528\u4e8e\u4f5c\u4e1a\u7ec4\u7684\u6253\u5f00\u811a\u672c")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"var resultName = ScriptEngine.GetResultName();\nvar result = false;\nScriptEngine.GetLoginUser(function (_result) {\n  console.log(_result);\n  if (_result && _result.UserID) {\n    ScriptEngine.GetAjaxToApiServer('UserConfig', 'GetRoles', 'userID=' + _result.UserID, '', 'get', function (_result) {\n      console.log(_result);\n      var roleIDList = [];\n      if (_result && _result.length > 0) {\n        _.each(_result, function (_oneRole) {\n          roleIDList.push(_oneRole.ID);\n        })\n      }\n      try {\n        var daAccess = new DAAccess();\n        var daTaskGroup = daAccess.GetDA(SyncEntity.TaskGroup);\n        daTaskGroup.GetByUserGroupID(roleIDList, function (_isSuccess, _taskGroups) {          \n          if (_isSuccess) {\n            var filters = _.filter(_taskGroups, function (_taskGroup) {\n              if (_taskGroup.RelatedSequenceList && _taskGroup.RelatedSequenceList.length > 0) {\n                //\u5df2\u63a5\u53d7\u4e14\u4e0d\u662f\u5df2\u6267\u884c\u72b6\u6001\n                return _.find(_taskGroup.RelatedSequenceList, function (_item) { return ((_item['IsRobTask'] && _item['RobTaskPersonID'] != Common.GuidEmpty) || !_item['IsRobTask']) && _item['SequenceStatus'] != 3 });\n              } else {\n                return false\n              }\n            })\n            result = filters && filters.length > 5 ? true : false;\n          } else {\n            alert('\u83b7\u53d6\u4f5c\u4e1a\u7ec4\u5931\u8d25');\n          }\n          alert('\u7ed3\u679c = ' + result);\n          alert('\u53ef\u6267\u884c\u7684\u4f5c\u4e1a\u7ec4\u4e2a\u6570 = ' + filters.length);\n          ScriptEngine[resultName] = result;\n        })\n      } catch (e) {\n        alert(e.message);\n        ScriptEngine[resultName] = result;\n      }\n    });\n\n  } else {\n    alert('\u7ed3\u679c = ' + _isSuccess);\n\n    ScriptEngine[resultName] = result;\n  }\n});\nreturn { 'ResultName': resultName };\n\n")),(0,a.kt)("h3",{id:"\u6839\u636e\u8bbe\u5907\u7684\u8fd0\u884c\u65f6\u957f\u81ea\u52a8\u8ba1\u7b97\u51fa\u6da6\u6ed1\u5bff\u547d"},"\u6839\u636e\u8bbe\u5907\u7684\u8fd0\u884c\u65f6\u957f\uff0c\u81ea\u52a8\u8ba1\u7b97\u51fa\u6da6\u6ed1\u5bff\u547d"),(0,a.kt)("h4",{id:"\u9700\u6c42\u63cf\u8ff0-8"},"\u9700\u6c42\u63cf\u8ff0"),(0,a.kt)("p",null,"\u8bbe\u5907\u8fd0\u884c\u65f6\u957f\u6700\u9ad8\u4e3a300\u5c0f\u65f6\uff0c\u8d85\u8fc7\u9700\u8fdb\u884c\u6da6\u6ed1\u4fdd\u517b\uff0c\u6839\u636e300-\u8fd0\u884c\u65f6\u957f\u5c5e\u6027\u503c\uff0c\u81ea\u52a8\u8ba1\u7b97\u51fa\u6da6\u6ed1\u5bff\u547d\u4f5c\u4e1a\u9879\u7684\u503c"),(0,a.kt)("h4",{id:"\u811a\u672c\u4ee3\u7801-8"},"\u811a\u672c\u4ee3\u7801"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u9002\u7528\u4e8e\u4f5c\u4e1a\u9879\u7684\u9ed8\u8ba4\u503c\u8868\u8fbe\u5f0f")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"var\xa0resultName\xa0=\xa0ScriptEngine.GetResultName();\nvar\xa0assetID\xa0=\xa0ScriptEngine.Context.GetTaskAssetID(ScriptEngine.Context.GetCurTask())\nif(!assetID){\n\xa0\xa0assetID=\xa0'12aab825-b7e5-4610-91af-d782ba0239e0'\xa0//\u8d44\u4ea7ID\n}\nScriptEngine.GetAjaxToApiServer('Asset',\xa0'GetLatestTimeseries',\xa0'assetID='+assetID+'&attrNames=\u8fd0\u884c\u65f6\u957f',\xa0'',\xa0'get',\xa0function\xa0(_result)\xa0{\n\xa0var\xa0value\xa0=\xa0300;\n\xa0alert('\u8fd0\u884c\u65f6\u957f'\xa0+\xa0_result['\u8fd0\u884c\u65f6\u957f']['Value'])\n\xa0if\xa0(_result\xa0&&\xa0_result['\u8fd0\u884c\u65f6\u957f']\xa0&&\xa0_result['\u8fd0\u884c\u65f6\u957f']['Value'])\xa0{\n\xa0\xa0value\xa0=\xa0300\xa0-\xa0(_result['\u8fd0\u884c\u65f6\u957f']['Value'])\n\xa0}\n\xa0ScriptEngine.Context.SetTaskAttributeValue(contextID,'Value',value.toString());\n\xa0ScriptEngine[resultName]\xa0=\xa0value.toString();\n});\nreturn\xa0{\xa0'ResultName':resultName};\n\n")),(0,a.kt)("h3",{id:"\u52a8\u706b\u4f5c\u4e1a\u4e2d\u5224\u65ad\u5177\u6709mac\u5730\u5740\u7684\u5b9a\u4f4d\u7ec8\u7aef\u662f\u5426\u5728\u56f4\u680f\u5185"},"\u52a8\u706b\u4f5c\u4e1a\u4e2d\uff0c\u5224\u65ad\u5177\u6709MAC\u5730\u5740\u7684\u5b9a\u4f4d\u7ec8\u7aef\u662f\u5426\u5728\u56f4\u680f\u5185"),(0,a.kt)("h4",{id:"\u9700\u6c42\u63cf\u8ff0-9"},"\u9700\u6c42\u63cf\u8ff0"),(0,a.kt)("p",null,"\u5728\u52a8\u706b\u4f5c\u4e1a\u4e2d\uff0c\u7ed3\u5408\u5b9a\u4f4d\u7cfb\u7edf\uff0c\u5224\u65ad\u6709MAC\u5730\u5740\u7684\u5b9a\u4f4d\u7ec8\u7aef\u662f\u5426\u5728\u7ed8\u5236\u7684\u52a8\u706b\u533a\u57df\u56f4\u680f\u5185"),(0,a.kt)("h4",{id:"\u811a\u672c\u4ee3\u7801-9"},"\u811a\u672c\u4ee3\u7801"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u9002\u7528\u4e8e\u4f5c\u4e1a\u6761\u4ef6\u811a\u672c\u3001\u4f5c\u4e1a\u9879\u903b\u8f91\u6267\u884c\u811a\u672c\u3001\u4f5c\u4e1a\u7ec4\u6253\u5f00\u811a\u672c")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"var joySuchAjaxToApiServer = function (_action, _urlParameters, _data, _method, _callback) {\n  try {\n    var _urlParameters = (_urlParameters) ? _urlParameters : '';\n    var _method = (_method) ? _method : 'get';\n    var _data = (_data) ? _data : null;\n\n    var url = 'http://192.168.125.194:46000';\n    if (_action) {\n      url += '/' + _action\n    }\n    if (_urlParameters)\n      url += '?' + _urlParameters;\n    var ajaxOptions = {\n      type: _method,\n      contentType: 'application/json; charset=utf-8',\n      data: _data,\n      url: url,\n      timeout: 100000, //\u8d85\u65f6\u65f6\u95f4\uff1a10\u79d2\n      dataType: 'json',\n      success: function (_result, _textStatus, _jqXHR) {\n        if (_result.errorCode == 0) {\n          _result.IsOk = true;\n          _result.Response = _result.data;\n        } else {\n          _result.IsOk = false;\n        }\n\n        _callback(_result.IsOk, _result.errorMsg, _result.Response);\n      },\n      error: function (_jqXHR, _textStatus, _errorThrown) {\n        if (_callback)\n          _callback(false, '\u8bf7\u6c42\u5931\u8d25');\n      }\n    }\n    if (_action != 'getAccessTokenV2') {\n      ajaxOptions.headers = {\n        Authorization: joySuchToken//\u8fd9\u91cc\u662fToken\n      }\n    }\n    $.ajax(ajaxOptions);\n  } catch (e) {\n    if (_callback)\n      _callback(false, e.message);\n  }\n}\n\nvar setJoySuchToken = function (_callback) {\n  var data = {\n    'licence': 'd63a6557aa5fe703cefc5cc50f846895'//'5bb6bfae7eeb4cdd8d9099fc05a9d379'  // \u56fa\u5b9a\n  }\n  joySuchAjaxToApiServer('getAccessTokenV2', '', JSON.stringify(data), 'post', function (_isOk, _errMsg, _result) {\n    if (_isOk) {\n      joySuchToken = _result.token;\n      refreshToken = _result.refreshToken\n      tokenEffectiveTs = _result.startTime + _result.expiresIn * 1000\n    }\n    _callback()\n  })\n}\n\n// \u83b7\u53d6\u8d44\u4ea7\u5916\u90e8\u6807\u7b7e\nvar getAssetTag = function (_assetName, _callback) {\n  var mac = ''\n  Common.AjaxToApiServer('Asset', 'GetAllExtTags', '', null, 'GET', function (_isOk, _msg, _response) {\n    if (_isOk) {\n      var find = _.find(_response, function (_item) { return _item.AssetName == _assetName && _item.APName == 'MAC\u5730\u5740' });\n      if (find) {\n        mac = find.ExtTag;\n      }\n    } else {\n      alert('\u83b7\u53d6\u8d44\u4ea7\u5916\u90e8\u6807\u7b7e\u5931\u8d25\uff0c\u5931\u8d25\u7684\u539f\u56e0\u4e3a\uff1a' + _msg);\n    }\n    _callback(mac)\n  })\n}\n\n\nvar resultName = ScriptEngine.GetResultName();\nvar joySuchToken = '';\nvar refreshToken = '';\nvar tokenEffectiveTs = '';\nvar railID = ScriptEngine.Context.GetTaskGroupPropertyValue('\u56f4\u680fID')// \u56f4\u680fID\n\ngetAssetTag('\u5b9a\u4f4d\u80f8\u724c1', function (_mac) {\n  if (_mac) {\n    setJoySuchToken(function () {\n      var condition = {\n        'buildId': '203498',\xa0  // \u56fa\u5b9a\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\n        'railId': railID\n      }\n      joySuchAjaxToApiServer('WebLocate/locateByRail', 'accessToken=' + joySuchToken, JSON.stringify(condition), 'post', function (_isOk, _errMsg, _result) {\n        if (_isOk && _result && _result['recordList']) {\n          var find = _.find(_result['recordList'], function (_item) { return _item.userId == _mac });\n          if (!find) {\n          for(var\xa0i\xa0=\xa00;i<1000;i++){\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0alert('\u4e0d\u5728\u52a8\u706b\u4f5c\u4e1a\u8303\u56f4\u5185');\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0}\n          }\n        } else {\n         for(var\xa0i\xa0=\xa00;i<1000;i++){\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0alert('\u4e0d\u5728\u52a8\u706b\u4f5c\u4e1a\u8303\u56f4\u5185');\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0}\n        }\n        ScriptEngine[resultName] = _mac;\n      })\n    })\n  } else {\n    alert('\u672a\u83b7\u53d6\u5230\u5f53\u524dMAC\u5730\u5740');\n    ScriptEngine[resultName] = _mac;\n  }\n\n})\nreturn { 'ResultName': resultName };\n\n")),(0,a.kt)("h3",{id:"\u4e00\u4e2ajson\u7c7b\u578b\u4f5c\u4e1a\u9879\u4e2d\u67d0\u5c5e\u6027\u76f8\u52a0\u8d4b\u7ed9\u53e6\u4e00\u4f5c\u4e1a\u9879\u9ed8\u8ba4\u503c"},"\u4e00\u4e2ajson\u7c7b\u578b\u4f5c\u4e1a\u9879\u4e2d\u67d0\u5c5e\u6027\u76f8\u52a0\u8d4b\u7ed9\u53e6\u4e00\u4f5c\u4e1a\u9879\u9ed8\u8ba4\u503c"),(0,a.kt)("h4",{id:"\u9700\u6c42\u63cf\u8ff0-10"},"\u9700\u6c42\u63cf\u8ff0"),(0,a.kt)("p",null,"\u5c06\u4e00\u4e2ajson\u7c7b\u578b\u4f5c\u4e1a\u9879\u4e2d\u7684\u67d0\u5c5e\u6027\u76f8\u52a0\u540e\u8d4b\u7ed9\u53e6\u4e00\u4f5c\u4e1a\u9879\u9ed8\u8ba4\u503c"),(0,a.kt)("h4",{id:"\u811a\u672c\u4ee3\u7801-10"},"\u811a\u672c\u4ee3\u7801"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u9002\u7528\u4e8e\u4f5c\u4e1a\u9879\u7684\u9ed8\u8ba4\u503c\u8868\u8fbe\u5f0f")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"var tasks = ScriptEngine.Context.curTasks;\nvar lastTask = _.find(tasks,function(_item){return _item['Name'] == '\u4f5c\u4e1a\u98791'});\nvar defaultValue = 0;\nif(lastTask && lastTask.Tags && lastTask.Tags[0]['Value']){\n    var value = lastTask.Tags[0]['Value'];\n    if(value){\n        var obj = JSON.parse(value);\n        if(obj && obj['\u64cd\u4f5c\u9879'] &&obj['\u64cd\u4f5c\u9879'].length > 0){\n            _.each(obj['\u64cd\u4f5c\u9879'],function(_item){\n                if(_item['\u6807\u51c6\u4ef7\u683c']){\n                    defaultValue+=Number(_item['\u6807\u51c6\u4ef7\u683c']);\n                }\n            })\n        }\n    }\n}\nreturn String(defaultValue);\n\n")),(0,a.kt)("h3",{id:"\u83b7\u53d6\u6307\u5b9a\u4f5c\u4e1a\u9879\u503c\u66f4\u65b0\u5230\u6307\u5b9a\u4f5c\u4e1a\u7ec4\u5c5e\u6027"},"\u83b7\u53d6\u6307\u5b9a\u4f5c\u4e1a\u9879\u503c\uff0c\u66f4\u65b0\u5230\u6307\u5b9a\u4f5c\u4e1a\u7ec4\u5c5e\u6027"),(0,a.kt)("h4",{id:"\u9700\u6c42\u63cf\u8ff0-11"},"\u9700\u6c42\u63cf\u8ff0"),(0,a.kt)("p",null,"Json\u4f5c\u4e1a\u7684\u4f5c\u4e1a\u9879\u503c\u66f4\u65b0\u5230\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u201c\u6536\u96c6\u660e\u7ec6\u201d\u548c\u201c\u5165\u5e93\u660e\u7ec6\u201dJSON\u7c7b\u578b\u7684\u9879\u91cc\u3002\u6709\u591a\u4e2a\u6570\u7ec4\u3002"),(0,a.kt)("h4",{id:"\u811a\u672c\u4ee3\u7801-11"},"\u811a\u672c\u4ee3\u7801"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u9002\u7528\u4e8e\u4f5c\u4e1a\u9879\u7684\u903b\u8f91\u811a\u672c")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"var tasks = ScriptEngine.Context.GetCurTasks();\nvar taskTemplateID = '74d6c057-c44b-4b68-826e-2ca71f2b84f3';\nvar findTask = _.find(tasks, function (_task) { \n     return _task['Name'] == '\u51fa\u5e93\u5217\u8868' && _task['EditTemplateID'] == taskTemplateID \n });\n if (findTask) {\n      var taskValue = (findTask['Tags'] && findTask['Tags'][0]) ? findTask['Tags'][0]['Value'] : '';\n      ScriptEngine.Context.SetTaskGroupPropertyValue('\u6536\u96c6\u660e\u7ec6', taskValue);\nScriptEngine.Context.SetTaskGroupPropertyValue('\u5165\u5e93\u660e\u7ec6', taskValue);\n}\nreturn true;\n\n")),(0,a.kt)("h3",{id:"\u6839\u636e\u8d44\u4ea7\u53f7\u83b7\u53d6\u6307\u5b9a\u8d44\u4ea7\u5c5e\u6027\u503c"},"\u6839\u636e\u8d44\u4ea7\u53f7\uff0c\u83b7\u53d6\u6307\u5b9a\u8d44\u4ea7\u5c5e\u6027\u503c"),(0,a.kt)("h4",{id:"\u9700\u6c42\u63cf\u8ff0-12"},"\u9700\u6c42\u63cf\u8ff0"),(0,a.kt)("p",null,"\u6839\u636e\u8d44\u4ea7\u53f7\uff0c\u83b7\u53d6\u6307\u5b9a\u8d44\u4ea7\u5c5e\u6027\u503c"),(0,a.kt)("h4",{id:"\u811a\u672c\u4ee3\u7801-12"},"\u811a\u672c\u4ee3\u7801"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u9002\u7528\u4e8e\u4f5c\u4e1a\u9879\u7684\u903b\u8f91\u811a\u672c")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"var resultName = ScriptEngine.GetResultName();\nScriptEngine.GetAjaxToApiServer('Asset', 'GetByMark', 'mark=\u667a\u80fd\u95011', null, 'get',function(_result){\n if(_result){\n  var assetID = _result.ID;\n  var assetName= _result.Name;\n  var assetPropertyName = '\u662f\u5426';\n  var urlParams = 'assetID=' + assetID + '&propertyName=' + assetPropertyName;\n  ScriptEngine.GetAjaxToApiServer('Asset', 'GetAssetProperty', urlParams, null, 'get',function(_assetProperty){\n   var propertyValue = '';\n   if(_assetProperty){\n    propertyValue = _assetProperty.CurrentValue;\n   }\n   ScriptEngine[resultName] = propertyValue;\n  })\n }else{\n  ScriptEngine[resultName] = '';\n }\n});\nreturn { 'ResultName':resultName};\n\n")),(0,a.kt)("h3",{id:"\u6839\u636e\u5f53\u524d\u4f5c\u4e1a\u9879\u503c\u627e\u5230\u5f53\u5929\u6307\u5b9a\u4f5c\u4e1a\u7ec4\u7684\u7c7b\u578b"},"\u6839\u636e\u5f53\u524d\u4f5c\u4e1a\u9879\u503c\u627e\u5230\u5f53\u5929\u6307\u5b9a\u4f5c\u4e1a\u7ec4\u7684\u7c7b\u578b"),(0,a.kt)("h4",{id:"\u9700\u6c42\u63cf\u8ff0-13"},"\u9700\u6c42\u63cf\u8ff0"),(0,a.kt)("p",null,"\u6839\u636e\u5f53\u524d\u4f5c\u4e1a\u9879\u7f16\u53f7\u503c\uff0c\u627e\u5230\u5f53\u5929\u6307\u5b9a\u4f5c\u4e1a\u7ec4\u7684\u7c7b\u578b"),(0,a.kt)("h4",{id:"\u811a\u672c\u4ee3\u7801-13"},"\u811a\u672c\u4ee3\u7801"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u9002\u7528\u4e8e\u4f5c\u4e1a\u9879\u7684\u903b\u8f91\u811a\u672c")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"var resultName = ScriptEngine.GetResultName();\nvar noValue = ScriptEngine.Context.GetTaskAttributeValue(contextID, 'Value');\nvar today = Common.FormatDateTimeByFormat('yyyy-MM-dd', new Date());\nvar templateName = '\u6a21\u62df\u533b\u5e9f'\nvar bodyParams = [\n    {\n        'ColumnName': '',\n        'Sign': 7,\n        'SubqueryList': [\n            {\n                'ColumnName': 'TaskGroupTemplateName',\n                'Sign': 1,\n                'Value': templateName\n            }, \n            {\n                'ColumnName': 'StartTime',\n                'Sign': 1,\n                'Value': today\n            }\n        ]\n    }\n]\nScriptEngine.GetAjaxToApiServer('Report', 'GetTaskGroupPropertyList', '', JSON.stringify(bodyParams), 'post', function (_result) {\n var type = '';\n alert(JSON.stringify(_result.Rows));\n if (_result && _result.Rows && _result.Rows.length > 0) {\n  console.log(_result);\n  var index = -1;\n  _.each(_result.Columns,function(_item,_index){\n   if(_item['ColumnName'] == 'PropertyValues'){\n    index = _index;\n   }\n  })\n  if(index >-1){\n   var find = _.find(_result.Rows,function(_item){\n    if(_item['Cells'][index]){\n     var propertiesObj = JSON.parse(_item['Cells'][index]);\n     if(propertiesObj['\u5165\u5e93\u660e\u7ec6']){\n      var onePropertyValueList = JSON.parse(propertiesObj['\u5165\u5e93\u660e\u7ec6']);\n      return _.find(onePropertyValueList,function(_oneObjValue){\n       return _oneObjValue['\u7f16\u53f7'] == noValue\n      })  \n     }\n    }else{\n     return false;\n    }\n   })\n   if (find) {\n    var propertiesObj = JSON.parse(find['Cells'][index]);\n    var inventoryDetailValue = JSON.parse(propertiesObj['\u5165\u5e93\u660e\u7ec6']);\n    var oneItem = _.find(inventoryDetailValue,function(_oneObjValue){\n     return _oneObjValue['\u7f16\u53f7'] == noValue\n    })\n    type = oneItem['\u7c7b\u578b'];\n   }\n  }\n }\n ScriptEngine[resultName] = type;\n});\nreturn { 'ResultName': resultName };\n\n")),(0,a.kt)("h3",{id:"\u6bd4\u8f83json\u5b57\u7b26\u4e32\u7c7b\u578b\u4f5c\u4e1a\u9879\u4e2d\u4e24\u9879\u7684\u503c\u6570\u91cf\u4e0d\u540c\u65f6\u63d0\u9192"},"\u6bd4\u8f83json\u5b57\u7b26\u4e32\u7c7b\u578b\u4f5c\u4e1a\u9879\u4e2d\u4e24\u9879\u7684\u503c\uff0c\u6570\u91cf\u4e0d\u540c\u65f6\u63d0\u9192"),(0,a.kt)("h4",{id:"\u9700\u6c42\u63cf\u8ff0-14"},"\u9700\u6c42\u63cf\u8ff0"),(0,a.kt)("p",null,"json\u5b57\u7b26\u4e32\u7c7b\u578b\u7684\u4f5c\u4e1a\u9879\uff0c\u7b2c\u4e00\u9879\u4e3a\u5217\u8868\uff0c\u7b2c\u4e8c\u9879\u7b2c\u4e09\u9879\u4e3a\u6570\u503c\uff0c\u5f53\u7b2c\u4e8c\u9879\u7b2c\u4e09\u9879\u7684\u503c\u4e0d\u76f8\u540c\u65f6\uff0c\u53d1\u51fa\u63d0\u9192\uff0c\u5185\u5bb9\u4e3a\u5217\u8868\u540d\u79f0+\u6570\u91cf\u9519\u8bef"),(0,a.kt)("h4",{id:"\u811a\u672c\u4ee3\u7801-14"},"\u811a\u672c\u4ee3\u7801"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u9002\u7528\u4e8e\u4f5c\u4e1a\u9879\u903b\u8f91\u4e2d\u7684\u811a\u672c\u6761\u4ef6")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"var Value = ScriptEngine.Context.GetTaskAttributeValue(contextID, 'Value');\nvar resultName = ScriptEngine.GetResultName();\nScriptEngine.GetAjaxToApiServer('UserDefinedList', 'GetChild', 'parentID=603c66f6-d32e-4314-af1f-6d5e0320a94e', '', 'get', function (_result) {\n    var test = '';\n    if (Value) {\n        var obj = JSON.parse(Value);\n        _.each(obj, function (_item) {\n            if (_item['\u5de5\u4f5c\u524d\u6570\u91cf'] != _item['\u51fa\u6e05\u6570\u91cf']) {\n          var find = _.find(_result, function (__item) { return __item.ID == _item['\u540d\u79f0'] });\n                if (find) {\n                    test += find['Name'] + '\u6570\u91cf\u9519\u8bef\uff01'\n                }\n            }\n        })\n    }\n    if (test) {\n        alert(test);\n    }\n});\n\nreturn { 'ResultName': resultName };\n")),(0,a.kt)("h3",{id:"\u5c06\u903b\u8f91\u62cd\u7167\u7684\u7167\u7247\u590d\u5236\u5230\u67d0\u4e2a\u6587\u4ef6\u7c7b\u578b\u7684\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u4e2d"},"\u5c06\u903b\u8f91\u62cd\u7167\u7684\u7167\u7247\u590d\u5236\u5230\u67d0\u4e2a\u6587\u4ef6\u7c7b\u578b\u7684\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u4e2d"),(0,a.kt)("h4",{id:"\u9700\u6c42\u63cf\u8ff0-15"},"\u9700\u6c42\u63cf\u8ff0"),(0,a.kt)("p",null,"\u4f5c\u4e1a\u9879\u89e6\u53d1\u903b\u8f91\u62cd\u7167\u540e\uff0c\u901a\u8fc7\u811a\u672c\u5c06\u7167\u7247\u590d\u5236\u5230\u6307\u5b9a\u7684\u7c7b\u578b\u4e3a\u6587\u4ef6\u7684\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u4e2d"),(0,a.kt)("h4",{id:"\u811a\u672c\u4ee3\u7801-15"},"\u811a\u672c\u4ee3\u7801"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u9002\u7528\u4e8e\u4f5c\u4e1a\u9879\u903b\u8f91\u4e2d\u7684\u6267\u884c\u811a\u672c")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"var curTask = ScriptEngine.Context.GetCurTask();\nvar logicID = '';\nif(curTask && curTask.Logics && curTask.Logics.length>0){ \n _.each(curTask.Logics,function(_logic){  \n  if(_logic.ActionType == 14 && _logic.LogicAction && _logic.LogicAction.NumberOfPhoto){  \n   logicID = _logic.ID;\n  }\n });\n}\nif(logicID){\n var resultName = ScriptEngine.GetResultName();\n ScriptEngine.Context.GetAttachmentsByEntityID(logicID,function(images){\n\n  var files = [];\n  _.each(images,function(_image){\n   files.push({'ID':_image.ID,'Name':_image.Name,'Source':'File','Ext':_image.Format});\n  });\n  var value = JSON.stringify(files);\n\n  ScriptEngine.Context.SetTaskGroupPropertyValue('\u73b0\u573a\u56fe\u7247',value) //\u73b0\u573a\u56fe\u7247\u4e3a\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u540d\n  ScriptEngine[resultName] = value;\n });\n return {'ResultName':resultName};\n}\nelse{\n ScriptEngine.Context.SetTaskGroupPropertyValue('\u73b0\u573a\u56fe\u7247','');\n return true;\n}\n")),(0,a.kt)("h3",{id:"\u7ec8\u7aefjson\u91cc\u4fee\u6539\u503c\u540e\u811a\u672c\u53ef\u4ee5\u81ea\u52a8\u65b0\u589e\u4e00\u4e2ajson\u6570\u7ec4"},"\u7ec8\u7aefjson\u91cc\u4fee\u6539\u503c\u540e\u811a\u672c\u53ef\u4ee5\u81ea\u52a8\u65b0\u589e\u4e00\u4e2ajson\u6570\u7ec4"),(0,a.kt)("h4",{id:"\u9700\u6c42\u63cf\u8ff0-16"},"\u9700\u6c42\u63cf\u8ff0"),(0,a.kt)("p",null,"\u7ec8\u7aef\u4f5c\u4e1a\u9879\u548c\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u6570\u636e\u7c7b\u578b\u4e3ajson\u5b57\u7b26\u4e32\u65f6\uff0c\u4fee\u6539\u503c\u540e\u811a\u672c\u53ef\u4ee5\u81ea\u52a8\u65b0\u589e\u4e00\u4e2ajson\u6570\u7ec4(\u7ec8\u7aef\u53caweb\u901a\u7528)"),(0,a.kt)("h4",{id:"\u811a\u672c\u4ee3\u7801-16"},"\u811a\u672c\u4ee3\u7801"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u9002\u7528\u4e8ejson\u4f5c\u4e1a\u9879\u548c\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u66f4\u591a\u8bbe\u7f6e\u4e2d\u7684\u4fee\u6539\u503c\u540e\u811a\u672c")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"var isWeb = window.SysCommon && !window.SysCommon.IsMobileDevices();\nif (window.SysCommon && !window.SysCommon.IsMobileDevices()) {\n    $('.addEmptyJsonData').trigger('click');\n} else {\n    $('.addEmptyJsonData').trigger('tap');\n}\nreturn true;\n")),(0,a.kt)("h3",{id:"\u7ec8\u7aefjson\u91cc\u4fee\u6539\u503c\u540e\u811a\u672c\u53ef\u4ee5\u5c06\u5149\u6807\u8df3\u8f6c\u5230\u4e0b\u4e00\u9879\u6216\u6307\u5b9a\u540d\u79f0\u7684\u9879"},"\u7ec8\u7aefjson\u91cc\u4fee\u6539\u503c\u540e\u811a\u672c\u53ef\u4ee5\u5c06\u5149\u6807\u8df3\u8f6c\u5230\u4e0b\u4e00\u9879\u6216\u6307\u5b9a\u540d\u79f0\u7684\u9879"),(0,a.kt)("h4",{id:"\u9700\u6c42\u63cf\u8ff0-17"},"\u9700\u6c42\u63cf\u8ff0"),(0,a.kt)("p",null,"\u7ec8\u7aef\u4f5c\u4e1a\u9879\u548c\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u6570\u636e\u7c7b\u578b\u4e3ajson\u5b57\u7b26\u4e32\u65f6\uff0c\u4fee\u6539\u503c\u540e\u811a\u672c\u53ef\u4ee5\u5c06\u5149\u6807\u8df3\u8f6c\u5230\u4e0b\u4e00\u9879\u6216\u6307\u5b9a\u540d\u79f0\u7684\u9879(\u7ec8\u7aef\u53caweb\u901a\u7528)"),(0,a.kt)("h4",{id:"\u811a\u672c\u4ee3\u7801-17"},"\u811a\u672c\u4ee3\u7801"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u9002\u7528\u4e8ejson\u4f5c\u4e1a\u9879\u548c\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u66f4\u591a\u8bbe\u7f6e\u4e2d\u7684\u4fee\u6539\u503c\u540e\u811a\u672c")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"var itemName = 'xxx'  // \u5982\u679c\u662f\u5f53\u524d\u9879\u7684\u4e0b\u4e00\u9879\u8bbe\u7f6e'';\u5236\u5b9a\u67d0\u4e00\u9879\u6539\u4e3a\u6307\u5b9a\u9879\u7684\u540d\u79f0\nif (window.SysCommon && !window.SysCommon.IsMobileDevices()) {\n    var needFocusItemDom = null;\n    if (itemName) {\n        var jsonItems = $('#' + contextID).parents('.jsonObject').find('.form-group.propertyRow');\n        needFocusItemDom = _.find(jsonItems, function (_item) { return $(_item).attr('propertyname') == itemName });\n    } else {\n        var curItemIndex = $('#' + contextID).index();\n        var nextItemIndex = curItemIndex + 1;\n        needFocusItemDom = $('#' + contextID).parents('.jsonObject').find('.form-group.propertyRow:eq(' + nextItemIndex + ')')[0];\n    }\n    if (needFocusItemDom) {\n        if ($(needFocusItemDom).find('textarea').length > 0) {\n            $(needFocusItemDom).find('textarea').focus();\n        } else {\n            $(needFocusItemDom).find('input').focus();\n        }\n    }\n} else {\n    var needFocusItemID = '';\n    if (itemName) {\n        var oneGroupJsonTitleDoms = $('.clickSelected').parents('.jsonObjectWrap').find('.titleSty');\n        var findTitleDom = _.find(oneGroupJsonTitleDoms, function (_item) { return $(_item).html() == itemName });\n        if (findTitleDom) {\n            needFocusItemID = $(findTitleDom).parent().find('.jsonObject').attr('id').substr(9);\n        }\n    } else {\n        var curItemIndex = $('.clickSelected').parents('li').index();\n        if (curItemIndex > -1) {\n            var nextItemIndex = curItemIndex + 1;\n            var nextItemDom = $('.clickSelected').parents('.jsonObjectWrap').find('.jsonObject:eq(' + nextItemIndex + ')');\n            if (nextItemDom.length > 0) {\n                needFocusItemID = nextItemDom.attr('id').substr(9);\n            }\n        }\n    }\n    if (needFocusItemID && Common.IsNotEmptyGuid(needFocusItemID)) {\n        var needFocusItemCustomInputValueID = 'customInputValue' + needFocusItemID;\n        var needFocusItemCustomTextareaValueID = needFocusItemCustomInputValueID + '_customText';\n        var needFocusItemInputID = ($('#' + needFocusItemCustomTextareaValueID).length > 0) ? needFocusItemCustomTextareaValueID : needFocusItemCustomInputValueID;\n        var curJsonItemID = $('.clickSelected').parents('.jsonObject').attr('id');\n        var curCustomInputValueID = 'customInputValue' + curJsonItemID.substr(9);\n        var isHasSinglePopup = $('#' + curCustomInputValueID + '_iScrollWrapper').length > 0;\n        var isHasMultiPopup = $('#MultiSelect_Popup').length > 0;\n        var isDateTime = $('#' + curCustomInputValueID + '_Parent').find('.idong-icon.icon-calendar-idong').length > 0 || $('#' + curCustomInputValueID + '_Parent').find('.idong-icon.icon-time-idong').length > 0\n        var isSwitch = $('#' + curJsonItemID).find('.mui-switch.customType_switch').length > 0;\n        var isTree = $('.clickSelected').attr('id').indexOf('_treeSelect') > -1;\n        if (isHasSinglePopup || isHasMultiPopup || isDateTime || isSwitch || isTree) {\n            setTimeout(function () {\n                $('.clickSelected').removeClass('clickSelected');\n                $('#' + needFocusItemCustomInputValueID).addClass('clickSelected');\n                $('#' + needFocusItemInputID).focus();\n            }, 500);\n        } else {\n            $('.clickSelected').removeClass('clickSelected');\n            $('#' + needFocusItemCustomInputValueID).addClass('clickSelected');\n            $('#' + needFocusItemInputID).focus();\n        }\n    }\n}\n")),(0,a.kt)("h3",{id:"\u6839\u636e\u4f5c\u4e1a\u5173\u8054\u8d44\u4ea7\u4e0b\u7684\u5b50\u8d44\u4ea7\u81ea\u52a8\u65b0\u5efa\u4f5c\u4e1a\u89c4\u8303\u5f15\u7528"},"\u6839\u636e\u4f5c\u4e1a\u5173\u8054\u8d44\u4ea7\u4e0b\u7684\u5b50\u8d44\u4ea7\u81ea\u52a8\u65b0\u5efa\u4f5c\u4e1a\u89c4\u8303\u5f15\u7528"),(0,a.kt)("h4",{id:"\u9700\u6c42\u63cf\u8ff0-18"},"\u9700\u6c42\u63cf\u8ff0"),(0,a.kt)("p",null,"\u627e\u5230\u4f5c\u4e1a\u7684\u5173\u8054\u8d44\u4ea7\u4e0b\u7684\u6240\u6709\u5b50\u8d44\u4ea7\uff0c\u6839\u636e\u5b50\u8d44\u4ea7\u7684\u8d44\u4ea7\u7c7b\u522b\u4ee5\u53ca\u6570\u91cf\u521b\u5efa\u5bf9\u5e94\u6570\u91cf\u548c\u5173\u8054\u8d44\u4ea7\u7c7b\u522b\u7684\u4f5c\u4e1a\u89c4\u8303\u5f15\u7528\uff0c\u5e76\u81ea\u52a8\u914d\u7f6e\u4e0a\u8d44\u4ea7\u3002"),(0,a.kt)("h4",{id:"\u811a\u672c\u4ee3\u7801-18"},"\u811a\u672c\u4ee3\u7801"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u9002\u7528\u4e8e\u4f5c\u4e1a\u9879\u903b\u8f91\u4e2d\u7684\u6267\u884c\u811a\u672c")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"var context = ScriptEngine.Context;\nvar curTask = context.GetTaskByID(contextID);\nvar curTaskGroup = context.GetCurTaskGroup();\nvar createTaskHelper = new CreateTaskHelper();\nvar parentAssetID = @MyTask.Asset;\n\n// \u51fd\u6570 - \u83b7\u53d6\u76f4\u63a5\u513f\u5b50\u7684\u8d44\u4ea7\uff0c\u540c\u65f6\u5e26\u4e0a\u8d44\u4ea7\u7c7b\u522b\u7684\u540d\u79f0\uff08\u8bf7\u52ff\u4fee\u6539\uff09\nvar getAssetChildren = function(_parentAssetID,_callback){\n var daAccess = new DAAccess();  var daAccess = new DAAccess();\n    var daAsset = daAccess.GetDA(SyncEntity.Asset);\n    daAsset.GetChildren(_parentAssetID,function(_isSuccess, _assets){\n     if(_assets && _assets.length>0){\n      // \u83b7\u53d6\u8d44\u4ea7\u7c7b\u522b\n      var assetTypeIDs = [];\n      _.each(_assets,function(_asset){\n       if(Common.IsNotEmptyGuid(_asset.AssetsTypeID)){\n        assetTypeIDs.push(_asset.AssetsTypeID);\n    }    \n      });\n      if(assetTypeIDs.length>0){\n    var daAssetType = daAccess.GetDA(SyncEntity.AssetType);\n    daAssetType.GetAllByIDs(assetTypeIDs,function(_isSuccess, _assetTypes){\n     if(_assetTypes && _assetTypes.length>0){\n      var dic = {};\n      _.each(_assetTypes,function(_assetType){dic[_assetType.ID] = _assetType.Name;});\n      _.each(_assets,function(_asset){\n       if(dic[_asset.AssetsTypeID])\n        _asset.AssetsTypeName = dic[_asset.AssetsTypeID];\n      });\n      _callback(_assets);\n     }\n     else{\n      _callback(_assets);\n     }\n    });\n      }\n      else{\n       _callback(_assets);\n      }      \n     }\n     else{\n      _callback(_assets);\n     }\n    });\n};\n\n\n// \u51fd\u6570 - \u6839\u636e\u4f5c\u4e1a\u89c4\u8303\u540d\u521b\u5efa\u4f5c\u4e1a\uff08\u8bf7\u52ff\u4fee\u6539\uff09\nvar createTaskFunc = function(_positionTask, _assetID, _taskstandardName, _taskName, _callback) {\n    var daAccess = new DAAccess();\n    var daTaskStandard = daAccess.GetDA(SyncEntity.TaskStandard);\n    daTaskStandard.GetByName(_taskstandardName, function(_isSuccess, _taskstandard) {\n        if (_isSuccess && _taskstandard) {\n            var sameLevelTasks = context.GetChildTasks(_positionTask.ParentTaskID);\n            var mapAssets = [{\n      'AssetID': _assetID ,\n      'TaskStandardID': _taskstandard.TemplateID\n     }];\n            createTaskHelper.CreateTaskByTaskStandard(_taskstandard.ID, sameLevelTasks, _positionTask, 'after', _taskName, '', curTaskGroup.ID, '', mapAssets, true,\n                function(_isSuccess, _errorMsg, _topTask, _tasks, _needSaveTasks) {\n                    if (_isSuccess) {\n                        if (_tasks) {\n                            context.AddTasks(_tasks);\n                        }\n                        _callback(true, '', _topTask, _tasks);\n                    } else {\n                        _callback(false, _errorMsg);\n                    }\n                }, false);\n        } else {\n            _callback(false, '\u4f5c\u4e1a\u89c4\u8303\u201c' + _taskstandardName + '\u201d\u4e0d\u5b58\u5728');\n        }\n    });\n};\n\n\n// \u51fd\u6570 - \u521b\u5efa\u591a\u4e2a\u4f5c\u4e1a\uff08\u8bf7\u52ff\u4fee\u6539\uff09\nvar errorMsgs = [];\nvar positionTask = context.GetParentTask(curTask);\nvar createTasksFunc = function(_createInfos, _callback) {\n\n    var createOne = function(_index) {\n        if (_createInfos && _index >= _createInfos.length) {\n            _callback(errorMsgs);\n            return;\n        }\n\n        createTaskFunc(positionTask, _createInfos[_index].AssetID, _createInfos[_index].TaskstandardName, _createInfos[_index].TaskName, function(_isSuccess, _errorMsg, _topTask, _tasks) {\n            if (_isSuccess) {\n             positionTask = _topTask;\n            } else {                \n                errorMsgs.push(_errorMsg);\n            }\n            createOne(_index + 1);\n        });\n    };\n\n    createOne(0);\n};\n\n// \u51fd\u6570 - \u5f97\u5230\u8981\u521b\u5efa\u7684\u4fe1\u606f\u5bf9\u8c61\nvar getCreateInfos = function(_parentAssetID, _callback){ \n getAssetChildren(_parentAssetID,function(_assets){\n  var createInfos = [];  \n  if(_assets && _assets.length>0){\n   _.each(_assets,function(_asset){\n    // \u6709\u5bf9\u5e94\u7684\u8d44\u4ea7\u7c7b\u522b\u624d\u521b\u5efa\n    if(_asset && _asset.AssetsTypeName){\n     var item = {\n      'AssetID': _asset.ID, \n      'TaskstandardName': _asset.AssetsTypeName + '\u6a21\u5757\u68c0\u67e5',   //\u6839\u636e\u8d44\u4ea7\u7c7b\u522b\u786e\u5b9a\u4f5c\u4e1a\u89c4\u8303\u540d\uff0c\u8bf7\u6309\u5b9e\u9645\u60c5\u51b5\u8c03\u6574\n      'TaskName': _asset.Name + '\u6a21\u5757\u68c0\u67e5' //\u4f5c\u4e1a\u540d\u662f\u8d44\u4ea7\u540d+\u6a21\u5757\u68c0\u67e5\uff0c\u8bf7\u6309\u5b9e\u9645\u60c5\u51b5\u8c03\u6574\n     }\n     createInfos.push(item);\n    }\n   });   \n  }\n  _callback(createInfos);\n });\n}\n\n\n// \u542f\u52a8\u8fd0\u884c\uff08\u8c03\u7528\u63a5\u53e3\u51fd\u6570\uff0c\u8bf7\u52ff\u4fee\u6539\uff09\nvar resultName = ScriptEngine.GetResultName();\ngetCreateInfos(parentAssetID, function(_createInfos){\n if(_createInfos && _createInfos.length>0){\n  createTasksFunc(_createInfos, function(_errorMsgs) {\n      if (_errorMsgs.length == _createInfos.length) {\n          alert('\u5168\u90e8\u521b\u5efa\u5931\u8d25\uff0c\u9519\u8bef\u4fe1\u606f\u4e3a\uff1a\\r\\n' + _errorMsgs.join('\\r\\n'));\n      } else if (_errorMsgs.length > 0) {\n          alert('\u90e8\u5206\u521b\u5efa\u5931\u8d25\uff0c\u9519\u8bef\u4fe1\u606f\u4e3a\uff1a\\r\\n' + _errorMsgs.join('\\r\\n'));\n      }\n      ScriptEngine[resultName] = true;\n  });\n }\n else{\n  ScriptEngine[resultName] = true;\n }\n});\nreturn { 'ResultName': resultName };\n\n")),(0,a.kt)("h3",{id:"\u5f97\u5230\u5f53\u524d\u767b\u5f55\u7528\u6237\u5f85\u6267\u884c\u548c\u6267\u884c\u4e2d\u4f5c\u4e1a\u7ec4\u540d\u79f0\u8fd4\u56de\u53ef\u9009\u9879\u5217\u8868"},"\u5f97\u5230\u5f53\u524d\u767b\u5f55\u7528\u6237\u5f85\u6267\u884c\u548c\u6267\u884c\u4e2d\u4f5c\u4e1a\u7ec4\u540d\u79f0\uff0c\u8fd4\u56de\u53ef\u9009\u9879\u5217\u8868"),(0,a.kt)("h4",{id:"\u9700\u6c42\u63cf\u8ff0-19"},"\u9700\u6c42\u63cf\u8ff0"),(0,a.kt)("p",null,"\u5c06\u5f53\u524d\u767b\u5f55\u7528\u6237\u540c\u6b65\u540e\u5b58\u5728\u4e8e\u5f85\u6267\u884c\u548c\u6267\u884c\u4e2d\u4f5c\u4e1a\u7ec4\u540d\u79f0\u5f62\u6210\u4e00\u4e2a\u53ef\u9009\u9879\u5217\u8868"),(0,a.kt)("h4",{id:"\u811a\u672c\u4ee3\u7801-19"},"\u811a\u672c\u4ee3\u7801"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u9002\u7528\u4e8e\u4f5c\u4e1a\u9879\u7684\u53ef\u9009\u9879\u811a\u672c")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"var resultName = ScriptEngine.GetResultName(); \nvar curUser = GlobalInfo.GetLoginUser();\nvar roleIDs = [];\nif (curUser.AllUserRoleGroups) {\n    _.each(curUser.AllUserRoleGroups, function (_role) {\n        roleIDs.push(_role.ID);\n    });\n}\nif (roleIDs.length > 0) {\n    var da = new DAAccess();\n    var daRoleTG = da.GetDA(SyncEntity.RoleTG);\n    daRoleTG.GetSequenceIDbyRoles(roleIDs, function (_isSuccess, _seqRoleIDs) {\n        if (_isSuccess) {\n            // \u83b7\u53d6\u6240\u6709\u4f5c\u4e1a\u7ec4\uff08\u521b\u5efa\u548c\u6267\u884c\uff09\n            var daTaskGroup = da.GetDA(SyncEntity.TaskGroup);\n            daTaskGroup.GetByUserGroupID(roleIDs, function (_isSuccess, _taskGroups) {\n                var totalTaskGroups = null;\n                if (_isSuccess && _taskGroups) {\n                    totalTaskGroups = _taskGroups;\n                    totalTaskGroups = _.sortBy(totalTaskGroups, function (_taskGroup) {\n                        if (_taskGroup.CreateFlag == CreateFlag.ManualOnMW)\n                            return _taskGroup.CreatedOn;\n                        else\n                            return _taskGroup.PlanStartTime\n                    });\n                    // \u7b5b\u9009\u5f85\u6267\u884c\u6267\u884c\u4e2d\u7684\u4f5c\u4e1a\u7ec4\n                    var curServiceProject = curUser.serviceProject;\n                    var selectSPID = (curServiceProject ? curServiceProject.ID : Common.GuidEmpty);\n                    if (totalTaskGroups && totalTaskGroups.length > 0) {\n                        var toExecuteTaskGroups = [];\n                        for (var i = 0; i < totalTaskGroups.length; i++) {\n                            if (totalTaskGroups[i].RelatedSequenceList && totalTaskGroups[i].RelatedSequenceList.length > 0 && (!Common.IsNotEmptyGuid(selectSPID) || Common.IsEqualGuid(selectSPID, totalTaskGroups[i].ServiceProjectID))) {\n                                for (var j in totalTaskGroups[i].RelatedSequenceList) {\n                                    if (totalTaskGroups[i].RelatedSequenceList[j].SequenceStatus == JobStatus.Unknown)\n                                        totalTaskGroups[i].RelatedSequenceList[j].SequenceStatus = JobStatus.New;\n                                    if (totalTaskGroups[i].RelatedSequenceList[j].SequenceStatus == JobStatus.New || totalTaskGroups[i].RelatedSequenceList[j].SequenceStatus == JobStatus.Running) {\n                                        var name = totalTaskGroups[i].Name;\n                                        if (_seqRoleIDs && _seqRoleIDs.length > 0) {\n                                            var seqRoleID = _.find(_seqRoleIDs, function (_item) {\n                                                return Common.IsEqualGuid(_item.SequenceID, totalTaskGroups[i].RelatedSequenceList[j].SequenceID);\n                                            });\n                                            if (seqRoleID) {\n                                                if (totalTaskGroups[i].IsEnableCollaboration)\n                                                    name += '\uff08' + totalTaskGroups[i].RelatedSequenceList[j].ActivityEntityName + '\uff09';\n                                            }\n                                        }\n                                        toExecuteTaskGroups.push({\n                                            ID: totalTaskGroups[i]['ID'],\n                                            Name: name\n                                        })\n                                    }\n                                }\n                            }\n                        }\n                        ScriptEngine[resultName] = toExecuteTaskGroups;\n                    } else {\n                        ScriptEngine[resultName] = [];\n                    }\n                } else {\n                    ScriptEngine[resultName] = [];\n                }\n            });\n        } else {\n            ScriptEngine[resultName] = [];\n        }\n    });\n} else {\n    ScriptEngine[resultName] = [];\n}\nreturn {'ResultName':resultName};\n")),(0,a.kt)("h2",{id:"web\u7aef\u811a\u672c"},"Web\u7aef\u811a\u672c"),(0,a.kt)("h3",{id:"\u5f97\u5230\u8d44\u4ea7\u7684\u6240\u6709\u5b50\u5b59\u8fd4\u56de\u8d44\u4ea7\u540d\u7684\u5217\u8868"},"\u5f97\u5230\u8d44\u4ea7\u7684\u6240\u6709\u5b50\u5b59\uff0c\u8fd4\u56de\u8d44\u4ea7\u540d\u7684\u5217\u8868"),(0,a.kt)("h4",{id:"\u9700\u6c42\u63cf\u8ff0-20"},"\u9700\u6c42\u63cf\u8ff0"),(0,a.kt)("p",null,"\u6839\u636e\u6307\u5b9a\u7684\u8d44\u4ea7\u540d\u5f97\u5230\u5176\u6240\u6709\u5b50\u5b59\uff0c\u8fd4\u56de\u8d44\u4ea7\u540d\u7684\u5217\u8868"),(0,a.kt)("h4",{id:"\u811a\u672c\u4ee3\u7801-20"},"\u811a\u672c\u4ee3\u7801"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u9002\u7528\u4e8e\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u66f4\u591a\u8bbe\u7f6e\u4e2d\u7684\u53ef\u9009\u9879\u811a\u672c")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"var resultName = ScriptEngine.GetResultName();\nvar assetNames = [];\nScriptEngine.GetAssets('aaaaa', true, false, function (_result) {   //'aaaaa'\u4e3a\u8d44\u4ea7\u540d\n    if (_result && _result.length > 0) {\n        for (var i = 0; i < _result.length; i++) {\n            assetNames.push({ 'ID': _result[i].ID, 'Name': _result[i].Name });\n        }\n    }\n    ScriptEngine[resultName] = assetNames;\n});\n\nreturn { 'ResultName': resultName };\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u6548\u679c\u5982\u56fe")),(0,a.kt)("img",{alt:" ",src:(0,l.Z)("docimg/jiaoben1.png")}),(0,a.kt)("h3",{id:"\u5f97\u5230\u56fa\u5b9a\u7ec4\u7ec7\u5355\u5143\u7684\u76f4\u63a5\u513f\u5b50\u6b64\u5916\u52a0\u4e00\u4e2a\u56fa\u5b9a\u7684\u5b57\u7b26\u4e32\u8fd4\u56de\u5217\u8868"},"\u5f97\u5230\u56fa\u5b9a\u7ec4\u7ec7\u5355\u5143\u7684\u76f4\u63a5\u513f\u5b50\uff0c\u6b64\u5916\u52a0\u4e00\u4e2a\u56fa\u5b9a\u7684\u5b57\u7b26\u4e32\uff0c\u8fd4\u56de\u5217\u8868"),(0,a.kt)("h4",{id:"\u9700\u6c42\u63cf\u8ff0-21"},"\u9700\u6c42\u63cf\u8ff0"),(0,a.kt)("p",null,"\u5f97\u5230\u56fa\u5b9a\u7ec4\u7ec7\u5355\u5143\u4e0b\u6240\u6709\u7684\u76f4\u63a5\u513f\u5b50\uff0c\u5e76\u5728\u540e\u9762\u52a0\u4e00\u4e2a\u56fa\u5b9a\u7684\u5b57\u7b26\u4e32\uff0c\u8fd4\u56de\u6210\u5217\u8868"),(0,a.kt)("h4",{id:"\u811a\u672c\u4ee3\u7801-21"},"\u811a\u672c\u4ee3\u7801"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u9002\u7528\u4e8e\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u66f4\u591a\u8bbe\u7f6e\u4e2d\u7684\u53ef\u9009\u9879\u811a\u672c")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"var field = '*';  //\u56fa\u5b9a\u5b57\u7b26\u4e32\u53c2\u6570\nvar resultName = ScriptEngine.GetResultName();\nvar orgUnitNames = [];\nvar orgUnitName = '\u76d1\u7406\u961f';//\u53c2\u6570 \u7ec4\u7ec7\u5355\u5143\u540d\nScriptEngine.GetOrgUnits(orgUnitName, true, true, function (_result) {\n    if (_result && _result.length > 1) {//\u5f97\u5230\u7ed3\u679c\u7b2c\u4e00\u4e2a\u662f\u7ec4\u7ec7\u5355\u5143\u672c\u8eab\uff0c\u53ea\u9700\u513f\u5b50\uff0c\u5219\u4ece\u7b2c\u4e00\u4e2a\u5143\u7d20\u5f00\u59cb\n        for (var i = 1; i < _result.length; i++) {\n            orgUnitNames.push({ 'ID': _result[i].ID, 'Name': _result[i].Name + field});\n        }\n    }\n    ScriptEngine[resultName] = orgUnitNames;\n});\n\nreturn { 'ResultName': resultName };\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u6548\u679c\u5982\u56fe")),(0,a.kt)("img",{alt:" ",src:(0,l.Z)("docimg/jiaoben2.png")}),(0,a.kt)("h3",{id:"\u7ec4\u7ec7\u5355\u5143\u5c5e\u4e8e\u767b\u5f55\u4eba\u7ec4\u7ec7\u5355\u5143\u5c97\u4f4d\u4e3a\u56fa\u5b9a\u540d\u79f0\u6240\u6709\u4eba\u5217\u8868"},"\u7ec4\u7ec7\u5355\u5143\u5c5e\u4e8e\u767b\u5f55\u4eba\u7ec4\u7ec7\u5355\u5143\uff0c\u5c97\u4f4d\u4e3a\u56fa\u5b9a\u540d\u79f0\uff0c\u6240\u6709\u4eba\u5217\u8868"),(0,a.kt)("h4",{id:"\u9700\u6c42\u63cf\u8ff0-22"},"\u9700\u6c42\u63cf\u8ff0"),(0,a.kt)("p",null,"\u7ec4\u7ec7\u5355\u5143\u5c5e\u4e8e\u5f53\u524d\u767b\u5f55\u7528\u6237\u7ec4\u7ec7\u5355\u5143\uff0c\u5c97\u4f4d\u4e3a\u56fa\u5b9a\u540d\u79f0\uff0c\u8fd4\u56de\u6ee1\u8db3\u6761\u4ef6\u7684\u6240\u6709\u4eba\u7684\u5217\u8868"),(0,a.kt)("h4",{id:"\u811a\u672c\u4ee3\u7801-22"},"\u811a\u672c\u4ee3\u7801"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u9002\u7528\u4e8e\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u66f4\u591a\u8bbe\u7f6e\u4e2d\u7684\u53ef\u9009\u9879\u811a\u672c")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"var postName = '\u76d1\u7406\u5458';\nvar resultName = ScriptEngine.GetResultName();\nvar users = [];\nScriptEngine.GetLoginUser(function (_curLoginUser) {\n    if (_curLoginUser) {\n        var curUserID = _curLoginUser.UserID?_curLoginUser.UserID:_curLoginUser.ID;\n        var sql = 'select id,bi_name as Name from [User] where ai_deleted=\\'0\\'  and id in(\\\n                    select userid from userrolegroup where orgunitID in(\\\n                        SELECT DISTINCT ID FROM H_OrgUnitRelation WHERE ParentID in(select orgunitid from userrolegroup where userid=\\'' + curUserID + '\\')\\\n                    or orgunitid IN(select orgunitid from userrolegroup where userid=\\''+ curUserID + '\\'))\\\n                    and roleid in(select id from role where bi_name=\\'' + postName + '\\' and ai_deleted=\\'0\\')) order by bi_name';    \n        ScriptEngine.GetAjaxToApiServer('Sql', 'GetDataSetBySQL', 'sql=' + sql, null, 'POST', function (_result) {\n        if (_result && _result.Rows && _result.Rows.length > 0) {\n                for (var i = 0; i < _result.Rows.length; i++) {\n                    users.push({ ID: _result.Rows[i].Cells[0], Name: _result.Rows[i].Cells[1] });\n                }\n                ScriptEngine[resultName] = users;\n\n            } else {\n                ScriptEngine[resultName] = users;\n            }\n        });\n\n    } else {\n        ScriptEngine[resultName] = users;\n    }\n});\nreturn { 'ResultName': resultName };\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u6548\u679c\u5982\u56fe")),(0,a.kt)("img",{alt:" ",src:(0,l.Z)("docimg/jiaoben3.png")}),(0,a.kt)("h3",{id:"\u7ec4\u7ec7\u5355\u5143\u5c5e\u4e8e\u4f5c\u4e1a\u7ec4\u7ec4\u7ec7\u5355\u5143\u5c97\u4f4d\u4e3a\u56fa\u5b9a\u540d\u79f0-\u6240\u6709\u4eba\u5217\u8868"},"\u7ec4\u7ec7\u5355\u5143\u5c5e\u4e8e\u4f5c\u4e1a\u7ec4\u7ec4\u7ec7\u5355\u5143\uff0c\u5c97\u4f4d\u4e3a\u56fa\u5b9a\u540d\u79f0\uff0c \u6240\u6709\u4eba\u5217\u8868"),(0,a.kt)("h4",{id:"\u9700\u6c42\u63cf\u8ff0-23"},"\u9700\u6c42\u63cf\u8ff0"),(0,a.kt)("p",null,"\u7ec4\u7ec7\u5355\u5143\u5c5e\u4e8e\u4f5c\u4e1a\u7ec4\u7684\u7ec4\u7ec7\u5355\u5143\uff0c\u5c97\u4f4d\u4e3a\u56fa\u5b9a\u540d\u79f0\uff0c\u8fd4\u56de\u6ee1\u8db3\u6761\u4ef6\u7684\u6240\u6709\u4eba\u7684\u5217\u8868"),(0,a.kt)("h4",{id:"\u811a\u672c\u4ee3\u7801-23"},"\u811a\u672c\u4ee3\u7801"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u9002\u7528\u4e8e\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u66f4\u591a\u8bbe\u7f6e\u4e2d\u7684\u53ef\u9009\u9879\u811a\u672c\uff08\u8ba1\u5212\u548c\u521b\u5efa\u6d3b\u52a8\u4e0d\u9002\u7528\uff09")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"var postName = '\u76d1\u7406\u5458';\nvar taskGroupProperyName = '\u5e93\u5b58'; // \u540e\u7eed\u4ee3\u7801\u4f1a\u6839\u636e\u8fd9\u4e2a\u5c5e\u6027\u83b7\u53d6\u5f53\u524d\u4f5c\u4e1a\u7ec4\nvar users = [];\nvar taskgroupProperty = ScriptEngine.Context.GetTaskGroupProperty(taskGroupProperyName);\nif (taskgroupProperty) {\n    var resultName = ScriptEngine.GetResultName();\n    var sql = 'select DISTINCT id,bi_name as Name from [User] where ai_deleted=\\'0\\' \\\n    and id in(\\\n        select userid from userrolegroup where orgunitID in(\\\n            SELECT DISTINCT ID FROM H_OrgUnitRelation WHERE ParentID in(select OrgUnitID from taskGroupEntity where id IN(select TaskGroupID from TaskGroupProperty where ID=\\''+ taskgroupProperty.ID + '\\'))\\\n        ) or orgunitid IN(select OrgUnitID from taskGroupEntity where id IN(select TaskGroupID from TaskGroupProperty where ID=\\''+ taskgroupProperty.ID + '\\')) \\\n        and roleid in(select id from role where bi_name=\\''+ postName + '\\' and ai_deleted=\\'0\\')\\\n    ) order by bi_name';\n    ScriptEngine.GetAjaxToApiServer('Sql', 'GetDataSetBySQL', 'sql=' + sql, null, 'POST', function (_result) {\n        if (_result && _result.Rows && _result.Rows.length > 0) {\n            for (var i = 0; i < _result.Rows.length; i++) {\n                users.push({ ID: _result.Rows[i].Cells[0], Name: _result.Rows[i].Cells[1] });\n            }\n            ScriptEngine[resultName] = users;\n\n        } else {\n            ScriptEngine[resultName] = users;\n        }\n    });\n    return { 'ResultName': resultName };\n} else {\n    console.error('\u5c5e\u6027\u4e0d\u5b58\u5728\uff1a' + taskGroupProperyName);\n    return users;\n}\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u6548\u679c\u5982\u56fe")),(0,a.kt)("img",{alt:" ",src:(0,l.Z)("docimg/jiaoben4.png")}),(0,a.kt)("h3",{id:"\u6839\u636e\u540d\u79f0\u627e\u5230\u5bf9\u5e94\u8d44\u4ea7\u5c06\u6b64\u8d44\u4ea7\u7684\u67d0\u4e00\u5c5e\u6027\u66f4\u65b0\u5230\u53e6\u4e00\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u91cc"},"\u6839\u636e\u540d\u79f0\u627e\u5230\u5bf9\u5e94\u8d44\u4ea7\uff0c\u5c06\u6b64\u8d44\u4ea7\u7684\u67d0\u4e00\u5c5e\u6027\u66f4\u65b0\u5230\u53e6\u4e00\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u91cc"),(0,a.kt)("h4",{id:"\u9700\u6c42\u63cf\u8ff0-24"},"\u9700\u6c42\u63cf\u8ff0"),(0,a.kt)("p",null,"\u6839\u636e\u540d\u79f0\u627e\u5230\u5bf9\u5e94\u8d44\u4ea7\uff0c\u8d44\u4ea7\u540d\u552f\u4e00\uff0c\u5c06\u6b64\u8d44\u4ea7\u7684\u67d0\u4e00\u5c5e\u6027\u7684\u503c\u66f4\u65b0\u5230\u53e6\u4e00\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u91cc"),(0,a.kt)("h4",{id:"\u811a\u672c\u4ee3\u7801-24"},"\u811a\u672c\u4ee3\u7801"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u9002\u7528\u4e8e\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u66f4\u591a\u8bbe\u7f6e\u4e2d\u7684\u4fee\u6539\u503c\u4e8b\u4ef6\u540e\u811a\u672c")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"var assetName = '\u9600\u95e811';\nvar assetPropertyName = '\u72b6\u6001\u5b57\u7b26\u4e32';\nvar taskGroupPropertyName = '\u9600\u95e811\u7684\u72b6\u6001\u5b57\u7b26\u4e32';\nvar urlParameters = 'parentID=invalid&name=' + assetName;\nScriptEngine.GetAjaxToApiServer('Asset','GetByName',urlParameters,null,'get',function(_result){\n var asset = _result;\n if(asset){\n  urlParameters = 'assetID='+asset.ID+'&propertyName=' + assetPropertyName;\n  ScriptEngine.GetAjaxToApiServer('Asset','GetAssetProperty',urlParameters,null,'get',function(_result){\n   var assetProperty = _result;\n   if(assetProperty){\n    ScriptEngine.Context.SetTaskGroupPropertyValue(taskGroupPropertyName,assetProperty.CurrentValue);   \n   }\n   else{\n    console.error('\u8d44\u4ea7\u5c5e\u6027\u4e0d\u5b58\u5728\uff1a' + assetName +'.' + assetPropertyName);\n   }\n  });\n }else{\n  console.error('\u8d44\u4ea7\u4e0d\u5b58\u5728:' + assetName);\n }\n});\nreturn true;\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u6548\u679c\u5982\u56fe")),(0,a.kt)("img",{alt:" ",src:(0,l.Z)("docimg/jiaoben5.png")}),(0,a.kt)("h3",{id:"\u6839\u636e\u4eba\u5458\u540d\u79f0\u67e5\u627e\u4eba\u5458\u67d0\u4e00\u5c5e\u6027\u66f4\u591a\u5c5e\u6027\u66f4\u65b0\u5230\u53e6\u4e00\u4e2a\u4f5c\u4e1a\u7ec4\u5c5e\u6027"},"\u6839\u636e\u4eba\u5458\u540d\u79f0\u67e5\u627e\u4eba\u5458\u67d0\u4e00\u5c5e\u6027\uff08\u66f4\u591a\u5c5e\u6027\uff09\u66f4\u65b0\u5230\u53e6\u4e00\u4e2a\u4f5c\u4e1a\u7ec4\u5c5e\u6027"),(0,a.kt)("h4",{id:"\u9700\u6c42\u63cf\u8ff0-25"},"\u9700\u6c42\u63cf\u8ff0"),(0,a.kt)("p",null,"\u6839\u636e\u4eba\u5458\u7684\u540d\u79f0\u67e5\u627e\u8be5\u4eba\u5458\u66f4\u591a\u5c5e\u6027\u4e2d\u7684\u67d0\u4e00\u5c5e\u6027\uff0c\u5c06\u6b64\u5c5e\u6027\u503c\u66f4\u65b0\u5230\u53e6\u4e00\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u91cc"),(0,a.kt)("h4",{id:"\u811a\u672c\u4ee3\u7801-25"},"\u811a\u672c\u4ee3\u7801"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u9002\u7528\u4e8e\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u66f4\u591a\u8bbe\u7f6e\u4e2d\u7684\u4fee\u6539\u503c\u4e8b\u4ef6\u540e\u811a\u672c")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"var userName = 'a11\u7532\u73ed\u76d1\u7406\u5458';\nvar userPropertyName = '\u8d44\u8d28';\nvar taskGroupPropertyName = '\u4eba\u5458\u5c5e\u6027\u7684\u503c';\nvar urlParameters = 'parentID=invalid&name=' + userName;\nScriptEngine.GetAjaxToApiServer('UserConfig','GetByName',urlParameters,null,'get',function(_result){\n var user = _result; \n if(user){\n  var customProperties = user.CustomProperty;\n  if(customProperties){\n   customProperties = JSON.parse(customProperties);\n   var property = _.find(customProperties,function(_item){return _item.Name==userPropertyName;});\n   if(property){\n    ScriptEngine.Context.SetTaskGroupPropertyValue(taskGroupPropertyName,property.Value);\n   }\n   else{\n    console.error('\u4eba\u5458\u6269\u5c55\u5c5e\u6027\u4e0d\u5b58\u5728:' + userName + '.' + userPropertyName);\n   }\n  }\n  else{\n   console.error('\u4eba\u5458\u6ca1\u6709\u6269\u5c55\u5c5e\u6027:' + userName);\n  }\n }else{\n  console.error('\u4eba\u5458\u4e0d\u5b58\u5728:' + userName);\n }\n});\nreturn true;\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u6548\u679c\u5982\u56fe")),(0,a.kt)("img",{alt:" ",src:(0,l.Z)("docimg/jiaoben6.png")}),(0,a.kt)("h3",{id:"\u6309\u7167\u5217\u8868\u540d\u5f97\u5230\u5217\u8868\u9879"},"\u6309\u7167\u5217\u8868\u540d\u5f97\u5230\u5217\u8868\u9879"),(0,a.kt)("h4",{id:"\u9700\u6c42\u63cf\u8ff0-26"},"\u9700\u6c42\u63cf\u8ff0"),(0,a.kt)("p",null,"\u6309\u7167\u5217\u8868\u7684\u540d\u79f0\uff0c\u5f97\u5230\u8be5\u5217\u8868\u7684\u9879"),(0,a.kt)("h4",{id:"\u811a\u672c\u4ee3\u7801-26"},"\u811a\u672c\u4ee3\u7801"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u9002\u7528\u4e8e\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u66f4\u591a\u8bbe\u7f6e\u4e2d\u7684\u53ef\u9009\u9879\u811a\u672c")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"var\xa0resultName = ScriptEngine.GetResultName();\nvar\xa0responseItems = [];\nvar\xa0responseName =\xa0'\u5730\u533a';//\u53c2\u6570 \u81ea\u5b9a\u4e49\u5217\u8868\u540d\nconsole.log(responseName);\nvar urlParameters = 'parentID=&name=' + responseName;\nScriptEngine.GetAjaxToApiServer('UserDefinedList','GetByName',urlParameters,null,'get',function(_result){    \n if(_result){\n  urlParameters = 'parentID=' + _result.ID;\n  ScriptEngine.GetAjaxToApiServer('UserDefinedList','GetChild',urlParameters,null,'get',function(_result){    \n   if(_result){\n    ScriptEngine[resultName]=_result;\n   }\n   else{\n    console.error('\u6ca1\u6709\u627e\u5230\u201c'+responseName+'\u201d\u7684\u5217\u8868\u9879');\n    ScriptEngine[resultName]=[];\n   }\n  });  \n }\n else{\n  console.error('\u6ca1\u6709\u627e\u5230\u201c'+responseName+'\u201d\u7684\u5217\u8868\u7c7b\u578b');\n  ScriptEngine[resultName]=[];\n }\n});\nreturn\xa0{\xa0'ResultName':resultName};\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u6548\u679c\u5982\u56fe")),(0,a.kt)("img",{alt:" ",src:(0,l.Z)("docimg/jiaoben7.png")}),(0,a.kt)("h3",{id:"\u6309\u7167id\u5f97\u5230\u5217\u8868\u9879\u7684\u540d\u79f0"},"\u6309\u7167id\u5f97\u5230\u5217\u8868\u9879\u7684\u540d\u79f0"),(0,a.kt)("h4",{id:"\u9700\u6c42\u63cf\u8ff0-27"},"\u9700\u6c42\u63cf\u8ff0"),(0,a.kt)("p",null,"\u6309\u7167\u5217\u8868\u9879\u7684id\u5f97\u5230\u5217\u8868\u9879\u7684\u540d\u79f0"),(0,a.kt)("h4",{id:"\u811a\u672c\u4ee3\u7801-27"},"\u811a\u672c\u4ee3\u7801"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u9002\u7528\u4e8e\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u66f4\u591a\u8bbe\u7f6e\u4e2d\u7684\u53ef\u9009\u9879\u811a\u672c")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"var\xa0resultName = ScriptEngine.GetResultName();\nvar\xa0responseItemID =\xa0'698DB607-ED42-4FC1-978A-144D410FC46C';\nvar\xa0list =\xa0[];\nScriptEngine.GetAjaxToApiServer('UserDefinedList','GetByID','id='+responseItemID,\xa0'','get',function(_result){\n\xa0if(_result){\n\xa0\xa0list.push({ 'ID': _result.ID, 'Name': _result.Name });\n\xa0}\n\xa0ScriptEngine[resultName] = list;\n});\n\nreturn\xa0{\xa0'ResultName':resultName};\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u6548\u679c\u5982\u56fe")),(0,a.kt)("img",{alt:" ",src:(0,l.Z)("docimg/jiaoben8.png")}),(0,a.kt)("h3",{id:"\u9000\u6599\u660e\u7ec6---\u5b9e\u9645\u9000\u6599--\u9000\u6599\u5dee\u989d"},"\u9000\u6599\u660e\u7ec6 - \u5b9e\u9645\u9000\u6599 = \u9000\u6599\u5dee\u989d"),(0,a.kt)("h4",{id:"\u9700\u6c42\u63cf\u8ff0-28"},"\u9700\u6c42\u63cf\u8ff0"),(0,a.kt)("p",null,"\u9000\u6599\u660e\u7ec6 - \u5b9e\u9645\u9000\u6599 = \u9000\u6599\u5dee\u989d\uff0c\u90fd\u4e3ajson\u683c\u5f0f\u7684\u5e93\u5b58\u64cd\u4f5c\u5c5e\u6027\uff0c\u4ee5\u9000\u6599\u660e\u7ec6\u4e3a\u51c6\uff0c\u76f8\u540c\u7269\u6599\u7684\u6570\u91cf\u76f8\u51cf\uff0c\u6709\u5219\u51cf\u53bb\u5b9e\u9645\u9000\u6599\uff0c\u7ed3\u679c\u81ea\u52a8\u66f4\u65b0\u81f3\u9000\u6599\u5dee\u989d\uff0c\u9000\u6599\u5dee\u989d\u521d\u59cb\u503c\u4e3a\u7a7a"),(0,a.kt)("h4",{id:"\u811a\u672c\u4ee3\u7801-28"},"\u811a\u672c\u4ee3\u7801"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u9002\u7528\u4e8e\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u66f4\u591a\u8bbe\u7f6e\u4e2d\u7684\u4fee\u6539\u503c\u4e8b\u4ef6\u540e\u811a\u672c")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"var materialReturn = ScriptEngine.Context.GetTaskGroupPropertyValue('\u9000\u6599\u660e\u7ec6');\nvar realReturn = ScriptEngine.Context.GetTaskGroupPropertyValue('\u5b9e\u9645\u9000\u6599');\nif (materialReturn) {\n    var materialReturnObj = JSON.parse(materialReturn);\n    if(realReturn){\n     var realReturnObj = JSON.parse(realReturn);\n     if (materialReturnObj && materialReturnObj['\u64cd\u4f5c\u9879'] && realReturnObj && realReturnObj['\u64cd\u4f5c\u9879']) {\n         var materialReturnOperationItemList = materialReturnObj['\u64cd\u4f5c\u9879'];\n         var realReturnOperationItemList = realReturnObj['\u64cd\u4f5c\u9879'];\n         if (materialReturnOperationItemList && materialReturnOperationItemList.length > 0 && realReturnOperationItemList && realReturnOperationItemList.length > 0) {\n             for (var i = 0; i < materialReturnOperationItemList.length; i++) {\n                 var materielName = materialReturnOperationItemList[i]['\u7269\u6599'];\n                 if (materielName) {\n                  var find = _.find(realReturnOperationItemList,function(_item){return _item['\u7269\u6599'] == materielName;});\n                  if(find && find['\u6570\u91cf']){\n                   materialReturnOperationItemList[i]['\u6570\u91cf'] = parseFloat(materialReturnOperationItemList[i]['\u6570\u91cf']) - parseFloat(find['\u6570\u91cf']) + '';\n                  }\n                 }\n             }\n             \n         }\n     }\n    }\n    var modifyValue = JSON.stringify(materialReturnObj);\n    ScriptEngine.Context.SetTaskGroupPropertyValue('\u9000\u6599\u5dee\u989d', modifyValue);\n}\nreturn true;\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u6548\u679c\u5982\u56fe")),(0,a.kt)("img",{alt:" ",src:(0,l.Z)("docimg/jiaoben9.png")}),(0,a.kt)("h3",{id:"\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u4e3ajson\u64cd\u4f5c\u9879\u4e0b\u6709\u6807\u51c6\u4ef7\u683c\u5e76\u4e14\u5927\u4e8e200\u65f6\u66f4\u65b0\u53e6\u4e00\u4e2a\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u4e3a\u662f"},"\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u4e3ajson\uff0c\u64cd\u4f5c\u9879\u4e0b\u6709\u6807\u51c6\u4ef7\u683c\u5e76\u4e14\u5927\u4e8e200\u65f6\uff0c\u66f4\u65b0\u53e6\u4e00\u4e2a\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u4e3a'\u662f'"),(0,a.kt)("h4",{id:"\u9700\u6c42\u63cf\u8ff0-29"},"\u9700\u6c42\u63cf\u8ff0"),(0,a.kt)("p",null,"\u5f53\u524d\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u4e3ajson\uff0c\u5176\u4e2d\u64cd\u4f5c\u9879\u4e0b\u6709\u6807\u51c6\u4ef7\u683c\uff0c\u5f53\u6807\u51c6\u4ef7\u683c\u5927\u4e8e200\u65f6\uff0c\u66f4\u65b0\u53e6\u4e00\u4e2a\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u4e3a\u5217\u8868\u9879\u7684'\u662f'"),(0,a.kt)("h4",{id:"\u811a\u672c\u4ee3\u7801-29"},"\u811a\u672c\u4ee3\u7801"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u9002\u7528\u4e8e\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u66f4\u591a\u8bbe\u7f6e\u4e2d\u7684\u4fee\u6539\u503c\u4e8b\u4ef6\u540e\u811a\u672c")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"var\xa0curTaskGroupPropertyName =\xa0'\u5e93\u5b58';\nvar modifyTaskGroupPropertyName = '\u662f\u5426\u5217\u8868';\nvar\xa0property = ScriptEngine.Context.GetTaskGroupProperty(curTaskGroupPropertyName);\nif(property){\n if(property.Value){\n  var obj = JSON.parse(property.Value);\n  if(obj && obj['\u64cd\u4f5c\u9879'] && obj['\u64cd\u4f5c\u9879'].length>0){\n   var find = _.find(obj['\u64cd\u4f5c\u9879'],function(_item){ return _item['\u6807\u51c6\u4ef7\u683c'] && parseFloat(_item['\u6807\u51c6\u4ef7\u683c'])> 200 });\n   if(find){\n    var urlParameters = 'parentID=invalid&name=\u662f';\n    // \u83b7\u53d6\u540d\u5b57\u4e3a\u201c\u662f\u201d\u7684\u5217\u8868\u9879\uff08\u6ce8\u610f\uff1a\u5217\u8868\u9879\u540d\u5b57\u4e3a\u201c\u662f\u201d\u7684\u4e0d\u80fd\u6709\u591a\u4e2a\uff0c\u5426\u5219\u6709\u53ef\u80fd\u6765\u81ea\u4e8e\u4e0d\u540c\u7684\u5217\u8868\uff09\n    ScriptEngine.GetAjaxToApiServer('UserDefinedList','GetByName',urlParameters,null,'get',function(_result){    \n     if(_result){\n      ScriptEngine.Context.SetTaskGroupPropertyValue(modifyTaskGroupPropertyName,_result.ID);\n     }\n     else{\n      console.error('\u6ca1\u6709\u627e\u5230\u201c\u662f\u201d\u7684\u5217\u8868\u9879');\n     }\n    });   \n   }\n  }\n }\n else{\n  console.error('\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u503c\u4e3a\u7a7a\uff1a' + curTaskGroupPropertyName)\n }\n}\nelse{\n console.error('\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u4e0d\u5b58\u5728\uff1a' + curTaskGroupPropertyName);\n}\nreturn true;\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u6548\u679c\u5982\u56fe")),(0,a.kt)("img",{alt:" ",src:(0,l.Z)("docimg/jiaoben10.png")}),(0,a.kt)("h3",{id:"\u7b5b\u9009\u51fa\u7ec4\u7ec7\u5355\u5143\u5c5e\u4e8ea\u5c97\u4f4d\u7ef4\u4fee-\u7ec4\u7ec7\u5355\u5143\u5c5e\u4e8eb\u5c97\u4f4d\u4e3a\u73ed\u957f\u7684\u4eba\u7684\u96c6\u5408"},"\u7b5b\u9009\u51fa\u7ec4\u7ec7\u5355\u5143\u5c5e\u4e8ea\uff0c\u5c97\u4f4d\u7ef4\u4fee+ \u7ec4\u7ec7\u5355\u5143\u5c5e\u4e8eb\uff0c\u5c97\u4f4d\u4e3a\u73ed\u957f\u7684\u4eba\u7684\u96c6\u5408"),(0,a.kt)("h4",{id:"\u9700\u6c42\u63cf\u8ff0-30"},"\u9700\u6c42\u63cf\u8ff0"),(0,a.kt)("p",null,"\u7b5b\u9009\u51fa\u7ec4\u7ec7\u5355\u5143\u5c5e\u4e8ea\uff0c\u5c97\u4f4d\u7ef4\u4fee+ \u7ec4\u7ec7\u5355\u5143\u5c5e\u4e8eb\uff0c\u5c97\u4f4d\u4e3a\u73ed\u957f\u7684\u4eba\u7684\u96c6\u5408(\u6b64\u6761\u4ef6\u53ef\u4ee5\u662f\u4e00\u4e2a\u6216\u591a\u4e2a\uff0c\u7ec4\u5408\u662f\u56fa\u5b9a\u7684)\uff0c\u89d2\u8272\u80fd\u6ee1\u8db3\u5176\u4e2d\u4e00\u9879\u7684\u7528\u6237\uff0c\u90fd\u8fd4\u56de\u4e3a\u5217\u8868\u663e\u793a\u51fa\u6765"),(0,a.kt)("h4",{id:"\u811a\u672c\u4ee3\u7801-30"},"\u811a\u672c\u4ee3\u7801"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u9002\u7528\u4e8e\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u66f4\u591a\u8bbe\u7f6e\u4e2d\u7684\u53ef\u9009\u9879\u811a\u672c")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"var resultName = ScriptEngine.GetResultName();\nvar orgUnitNames = ['201\u8f66\u95f4', '202\u8f66\u95f4']; //\u7ec4\u7ec7\u5355\u5143\u540d\nvar postIDs = ['48f637c4-c4d2-422a-ae51-16364ab8838b', '65eb1faa-b1ae-4e63-8636-0b92eb35051b'];  //\u73ed\u957f\u3001\u6280\u5e08\nvar users = [];\nif (orgUnitNames && orgUnitNames.length > 0 && postIDs && postIDs.length > 0 && orgUnitNames.length == postIDs.length) {\n    var sql = 'select distinct [User].ID, [User].BI_Name UserName  from UserRoleGroup left join[User] on UserRoleGroup.UserID = [User].ID and[User].AI_Deleted = \\'0\\'\\ left join OrgUnit ChildOrgUnit on ChildOrgUnit.ID = UserRoleGroup.OrgUnitID and ChildOrgUnit.AI_Deleted = \\'0\\'\\ left join H_OrgUnitRelation on H_OrgUnitRelation.ID = UserRoleGroup.OrgUnitID left join OrgUnit ParentOrgUnit on ParentOrgUnit.ID = H_OrgUnitRelation.ParentID and ParentOrgUnit.AI_Deleted = \\'0\\' where ';\n    for (var i = 0; i < orgUnitNames.length; i++) {\n        sql += '((ParentOrgUnit.BI_Name=\\'' + orgUnitNames[i] + '\\' or  ChildOrgUnit.BI_Name=\\'' + orgUnitNames[i] + '\\') and UserRoleGroup.RoleID =\\''  + postIDs[i] + '\\')';\n        if (i != orgUnitNames.length - 1) {\n            sql += ' or ';\n        }\n    }\n    ScriptEngine.GetAjaxToApiServer('Sql', 'GetDataSetBySQL', 'sql=' + sql, null, 'POST', function (_result) {\n        if (_result && _result.Rows && _result.Rows.length > 0) {\n            for (var i = 0; i < _result.Rows.length; i++) {\n                users.push({ ID: _result.Rows[i].Cells[0], Name: _result.Rows[i].Cells[1] });\n            }\n            ScriptEngine[resultName] = users;\n        } else {\n            ScriptEngine[resultName] = users;\n        }\n    });\n} else {\n    ScriptEngine[resultName] = users;\n}\nreturn { 'ResultName': resultName };\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u6548\u679c\u5982\u56fe"),(0,a.kt)("img",{alt:" ",src:(0,l.Z)("docimg/jiaoben11.png")}))),(0,a.kt)("h3",{id:"eoc\u9009\u62e9\u5c5e\u4e8e\u67d0\u7ec4\u7ec7\u5355\u5143\u548c\u67d0\u5c97\u4f4d\u7684\u4eba\u663e\u793a\u662f\u5426\u5728\u5c97\u4e0d\u5728\u5c97\u6700\u540e\u6392\u5217\u663e\u793a\u5728\u624b\u5de5\u5355\u6570\u987a\u5e8f\u6392\u5217"},"EOC\u9009\u62e9\u5c5e\u4e8e\u67d0\u7ec4\u7ec7\u5355\u5143\u548c\u67d0\u5c97\u4f4d\u7684\u4eba\uff0c\u663e\u793a\u662f\u5426\u5728\u5c97\uff08\u4e0d\u5728\u5c97\u6700\u540e\u6392\u5217\uff09\uff0c\u663e\u793a\u5728\u624b\u5de5\u5355\u6570\uff08\u987a\u5e8f\u6392\u5217\uff09"),(0,a.kt)("h4",{id:"\u9700\u6c42\u63cf\u8ff0-31"},"\u9700\u6c42\u63cf\u8ff0"),(0,a.kt)("p",null,"EOC\u4fee\u6539\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u65f6\uff0c\u53ef\u9009\u62e9\u5c5e\u4e8e\u67d0\u7ec4\u7ec7\u5355\u5143\u548c\u67d0\u5c97\u4f4d\u7684\u4eba\uff0c\u540c\u65f6\u5c06\u6240\u6709\u7b26\u5408\u6761\u4ef6\u7684\u4eba\u662f\u5426\u5728\u5c97\uff08\u4e0d\u5728\u5c97\u6700\u540e\u6392\u5217\uff09\uff0c\u5728\u624b\u5de5\u5355\u6570\uff08\u987a\u5e8f\u6392\u5217\uff09\u663e\u793a\u51fa\u6765"),(0,a.kt)("h4",{id:"\u811a\u672c\u4ee3\u7801-31"},"\u811a\u672c\u4ee3\u7801"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u9002\u7528\u4e8e\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u66f4\u591a\u8bbe\u7f6e\u4e2d\u7684\u53ef\u9009\u9879\u811a\u672c")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"\nvar list = [];  //\u5b9a\u4e49\u6570\u7ec4\u5217\u8868\nvar orgUnitID = 'e31c2b8d-13c5-479a-9b88-48c35f7b2f96';  //\u5b9a\u4e49\u7ec4\u7ec7\u5355\u5143  \nvar postID = 'ce59a28d-f441-4953-9491-62ed2d576ee6'; //\u5b9a\u4e49\u5c97\u4f4d\nvar resultName = ScriptEngine.GetResultName();\nScriptEngine.GetAjaxToApiServer('UserConfig', 'GetByOrgUnitID', 'orgUnitID=' + orgUnitID + '&withRoles=' + true, '', 'GET', function (_usersBelongOrgUnit) {    //\u8c03\u5f97\u5230\u6240\u6709\u7528\u6237\u63a5\u53e3\n  console.log(_usersBelongOrgUnit); //\u6253\u5370\u51fa\u6765\n  list.push({ ID: 'title', Name: '\u59d3\u540d', '\u5728\u624b\u5de5\u5355\u6570': '\u5728\u624b\u5de5\u5355\u6570', '\u5728\u5c97': '\u662f\u5426\u5728\u5c97' });  //\u6570\u7ec4\u6807\u9898\n  ScriptEngine.GetAjaxToApiServer('UserConfig', 'GetByPostID', 'postID=' + postID, '', 'GET', function (_usersBelongPost) {    //\u8c03\u5f97\u5230\u6240\u6709\u7528\u6237\u63a5\u53e3\n    console.log(_usersBelongPost); //\u6253\u5370\u51fa\u6765\n    var userList = [];\n    if (_usersBelongPost && _usersBelongPost.length > 0 && _usersBelongOrgUnit && _usersBelongOrgUnit.length > 0) {\n      //\u4ece\u6240\u6709\u7528\u6237\u89d2\u8272\u91cc\u7b5b\u9009\u51fa\u7ec4\u7ec7\u5355\u5143\u548c\u5c97\u4f4d\u7b26\u5408\u7684\u7528\u6237\n      var users = _.filter(_usersBelongOrgUnit, function (_user) {\n        return _.find(_usersBelongPost, function (__user) { return __user.ID == _user.ID });\n      })\n      if (users && users.length > 0) {\n        _.each(users, function (_user) {\n          userList.push({ ID: _user.ID, Name: _user.Name })\n        })\n      }\n    }\n    var sql = 'select SeqUser.UserID,COUNT(*) as Count FROM SeqUser LEFT JOIN TaskGroupSequence ON TaskGroupSequence.ID = SeqUser.SeqID LEFT JOIN ActivityEntity ON ActivityEntity.ID = TaskGroupSequence.ActivityEntityID where  (ActivityState =1 or ActivityState =2)  and ActivityEntity.ActivityID = \\'94070C66-DAFC-4DEA-821E-586DDC7F4072\\' and TaskGroupSequence.TaskGroupEntityID in(select ID from TaskGroupEntity where IsExtracted=\\'0\\') group by SeqUser.UserID'\n\n    ScriptEngine.GetAjaxToApiServer('Sql', 'GetDataSetBySQL', 'sql=' + sql, '', 'get', function (_result) {\n      console.log(_result);\n      var toExecuteUserAndCount = [];\n      if (_result && _result.Rows && _result.Rows.length > 0) {\n        toExecuteUserAndCount = _result.Rows;\n      }\n      _.each(userList,function(_user){\n        var find = _.find(toExecuteUserAndCount,function(_item){return _item['Cells'] && _item['Cells'][0] == _user['ID']});\n        _user['\u5728\u624b\u5de5\u5355\u6570'] = find?find['Cells'][1]:0;\n      })\n      userList = _.sortBy(userList, '\u5728\u624b\u5de5\u5355\u6570');\n      ScriptEngine.GetAjaxToApiServer('Scheduling', 'GetScheduleUserByCondition', '', '', 'POST', function (_result) {    //\u8c03\u5f97\u5230\u6240\u6709\u7528\u6237\u63a5\u53e3\n        console.log(_result); //\u6253\u5370\u51fa\u6765\n        _.each(userList, function (_item) {\n          var isRight = _.find(_result, function (__item) {\n            var endTs = new Date(__item.EndTime).getTime();\n            var startTs = new Date(__item.StartTime).getTime();\n            var ts = new Date().getTime()\n            return (__item.UserID == _item.ID && ts >= startTs && ts <= endTs)\n          })\n          _item['\u5728\u5c97'] = isRight ? '\u662f' : '\u5426';\n          _item['Color'] = isRight ? 'black' : '#ccc';\n          console.log(isRight);\n        })\n        userList = _.sortBy(userList, '\u5728\u5c97').reverse();\n        list = list.concat(userList);\n        ScriptEngine[resultName] = list;\n\n      });\n    })\n  })\n});\nreturn { 'ResultName': resultName };\n\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u6548\u679c\u5982\u56fe"),(0,a.kt)("img",{alt:" ",src:(0,l.Z)("docimg/jiaoben12.png")}))),(0,a.kt)("h3",{id:"eoc\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u4e2d\u9009\u62e9\u67d0\u7ec4\u7ec7\u5355\u5143\u540e\u81ea\u52a8\u5c06\u5c5e\u4e8e\u7ec4\u7ec7\u5355\u5143\u7684\u7528\u6237\u586b\u5165\u53e6\u4e00\u4e2a\u4f5c\u4e1a\u7ec4\u5c5e\u6027"},"EOC\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u4e2d\u9009\u62e9\u67d0\u7ec4\u7ec7\u5355\u5143\u540e\uff0c\u81ea\u52a8\u5c06\u5c5e\u4e8e\u7ec4\u7ec7\u5355\u5143\u7684\u7528\u6237\u586b\u5165\u53e6\u4e00\u4e2a\u4f5c\u4e1a\u7ec4\u5c5e\u6027"),(0,a.kt)("h4",{id:"\u9700\u6c42\u63cf\u8ff0-32"},"\u9700\u6c42\u63cf\u8ff0"),(0,a.kt)("p",null,"EOC\u4fee\u6539\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u65f6\uff0c\u9009\u62e9\u4e86\u7ec4\u7ec7\u5355\u5143\u7684\u503c\u4e4b\u540e\uff0c\u81ea\u52a8\u83b7\u53d6\u5c5e\u4e8e\u8be5\u7ec4\u7ec7\u5355\u5143\u7684\u7528\u6237\uff0c\u5c06\u7ed3\u679c\u8d4b\u503c\u5230\u53e6\u4e00\u4e2a\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u4e2d"),(0,a.kt)("h4",{id:"\u811a\u672c\u4ee3\u7801-32"},"\u811a\u672c\u4ee3\u7801"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u9002\u7528\u4e8e\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u66f4\u591a\u8bbe\u7f6e\u4e2d\u7684\u53ef\u9009\u9879\u811a\u672c\u53ca\u4fee\u6539\u503c\u540e\u4e8b\u4ef6\u811a\u672c")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"\n\u53ef\u9009\u9879\u811a\u672c\u4e2d\uff0c\u7528\u4e8e\u83b7\u53d6\u7ec4\u7ec7\u5355\u5143\u5217\u8868\n\nvar field = '';  //\u56fa\u5b9a\u5b57\u7b26\u4e32\u53c2\u6570\nvar resultName = ScriptEngine.GetResultName();\nvar orgUnitNames = [];\nvar orgUnitName = '\u67d0\u7535\u5382';//\u53c2\u6570 \u7236\u7ea7\u7ec4\u7ec7\u5355\u5143\u540d\nScriptEngine.GetOrgUnits(orgUnitName, true, false, function (_result) {\n    if (_result && _result.length > 1) {\n        for (var i = 1; i < _result.length; i++) {\n            orgUnitNames.push({ 'ID': _result[i].ID, 'Name': _result[i].Name + field});\n        }\n    }\n    ScriptEngine[resultName] = orgUnitNames;\n});\n\nreturn { 'ResultName': resultName };\n\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"\u4fee\u6539\u503c\u540e\u4e8b\u4ef6\u811a\u672c\u4e2d\uff0c\u7528\u4e8e\u9009\u62e9\u7ec4\u7ec7\u5355\u5143\u540e\u83b7\u53d6\u7528\u6237\u53ca\u8d4b\u503c\n\nvar value = ScriptEngine.Context.GetTaskGroupPropertyValue('\u68c0\u4fee\u73ed\u7ec4'); //\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u540d\nScriptEngine.GetOrgUnits('', true, false,function(_result){\n var find = _.find(_result,function(_item){return _item['Name'] == value});\n    var userNameList = [];\n    if (find) {\n        SysCommon.AjaxToApiServer('UserConfig', 'GetByOrgUnitID', 'orgUnitID=' + find.ID + '&withRoles=' + false, '', 'get', function (__isOk, __msg, __result) {\n            if (__isOk && __result) {\n                if (__isOk && __result && __result.length > 0) {\n                    _.each(__result, function (_user) {\n                        userNameList.push(_user.Name);\n                    })\n                }\n            }\n            ScriptEngine.Context.SetTaskGroupPropertyValue('\u73ed\u7ec4\u6210\u5458', userNameList.join(','));  // \u81ea\u52a8\u8d4b\u503c\u7684\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u540d\n        })\n    }else{\n        ScriptEngine.Context.SetTaskGroupPropertyValue('\u73ed\u7ec4\u6210\u5458', userNameList.join(','));\n    }\n})\nreturn true;\n\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u6548\u679c\u5982\u56fe"),(0,a.kt)("img",{alt:" ",src:(0,l.Z)("docimg/jiaoben13.png")}))),(0,a.kt)("h3",{id:"\u6570\u636e\u7c7b\u578b\u4e3ajson\u5b57\u7b26\u4e32\u7684\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u4fee\u6539\u540e\u81ea\u52a8\u5c06\u503c\u586b\u5165\u53e6\u4e00\u4e2ajson\u5b57\u7b26\u4e32\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u4e2d"},"\u6570\u636e\u7c7b\u578b\u4e3ajson\u5b57\u7b26\u4e32\u7684\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u4fee\u6539\u540e\uff0c\u81ea\u52a8\u5c06\u503c\u586b\u5165\u53e6\u4e00\u4e2aJson\u5b57\u7b26\u4e32\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u4e2d"),(0,a.kt)("h4",{id:"\u9700\u6c42\u63cf\u8ff0-33"},"\u9700\u6c42\u63cf\u8ff0"),(0,a.kt)("p",null,"\u4f5c\u4e1a\u7ec4\u5c5e\u60271\u548c\u4f5c\u4e1a\u7ec4\u5c5e\u60272\u90fd\u4e3aJson\u5b57\u7b26\u4e32\uff0c\u5176\u4e2d\u6709\u76f8\u540c\u7684Json\u5c5e\u6027\uff0c\u5f53\u4fee\u6539\u4e86\u4f5c\u4e1a\u7ec4\u5c5e\u60271\u7684Json\u5c5e\u6027\u503c\u540e\uff0c\u81ea\u52a8\u5c06\u4fee\u6539\u540e\u7684\u503c\u5199\u8fdb\u4f5c\u4e1a\u7ec4\u5c5e\u60272\u91cc\u76f8\u540c\u7684Json\u5c5e\u6027\u4e2d"),(0,a.kt)("h4",{id:"\u811a\u672c\u4ee3\u7801-33"},"\u811a\u672c\u4ee3\u7801"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u9002\u7528\u4e8e\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u66f4\u591a\u8bbe\u7f6e\u4e2d\u7684\u4fee\u6539\u503c\u540e\u4e8b\u4ef6\u811a\u672c")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"var str = ScriptEngine.Context.GetTaskGroupPropertyValue('\u5185\u5bb9');\nconsole.log(str);\nvar assetNameList = [];\nif (str) {\n  ScriptEngine.GetAjaxToApiServer('UserDefinedList', 'GetUserDefinedListTree', '', null, 'GET', function (_response) {\n    var type = _.find(_response,function(_item){return _item['Name'] == '\u7c7b\u522b'});\n    var action = _.find(_response,function(_item){return _item['Name'] == '\u52a8\u4f5c'});\n    var newValueList = [];\n    var valueList = JSON.parse(str);\n    _.each(valueList, function (_item) {\n      var assetName = _item['\u5bf9\u8c61'];\n      if (assetName.indexOf('.') > -1) {\n        var index = assetName.lastIndexOf('.');\n        if (index > -1) {\n          assetName = assetName.substr(index + 1);\n        }\n      }\n      assetNameList.push(assetName);\n      var curType = _item['\u7c7b\u522b'];\n      var curAction = _item['\u52a8\u4f5c'];\n      if(type && type['ChildList']){\n        var find = _.find(type['ChildList'],function(__item){return __item['ID'] == curType});\n        if(find){\n          curType = find['Name'];\n        }\n      }\n      if(action && action['ChildList']){\n        var find = _.find(action['ChildList'],function(__item){return __item['ID'] == curAction});\n        if(find){\n          curAction = find['Name'];\n        }\n      }\n      newValueList.push({'\u7c7b\u522b':curType,'\u52a8\u4f5c':curAction,'\u5bf9\u8c61':_item['\u5bf9\u8c61']})\n    })\n    // console.log(newValueList);\n    ScriptEngine.GetAjaxToApiServer('Asset', 'GetAssets', '', null, 'GET', function (_result) {\n      var assetTypeIDList = [];\n      _.each(assetNameList, function (_assetName) {\n        var find = _.find(_result, function (_asset) { return _asset['Name'] == _assetName });\n        if (find && find['RelatedAssetType'] && find['RelatedAssetType']['ID'] && SysCommon.IsNotEmptyGuid(find['RelatedAssetType']['ID'])) {\n          assetTypeIDList.push(find['RelatedAssetType']['ID']);\n        } else {\n          assetTypeIDList.push(SysCommon.GuidEmpty);\n        }\n      })\n     \n\n        // ScriptEngine.Context.SetTaskGroupPropertyValue('\u64cd\u4f5c\u5185\u5bb91',JSON.stringify(valueList));\n        var taskGroupProperty = ScriptEngine.Context.GetTaskGroupProperty('\u64cd\u4f5c\u5185\u5bb9');\n        if (taskGroupProperty) {\n          $('.JsonData', $('#' + taskGroupProperty.ObjID)).attr('dataString', JSON.stringify(newValueList));\n          window.ShowJsonTableView($('#' + taskGroupProperty.ObjID).find('.JsonData'), JSON.stringify(newValueList));\n        }\n      \n    });\n  })\n}\n\nreturn true;\n\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u6548\u679c\u5982\u56fe"),(0,a.kt)("img",{alt:" ",src:(0,l.Z)("docimg/jiaoben14.png")}))),(0,a.kt)("h3",{id:"\u6570\u636e\u7c7b\u578b\u4e3a\u53ef\u8f93\u5165\u5217\u8868\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u7f16\u8f91\u65f6\u9009\u62e9\u8f93\u5165\u540e\u81ea\u52a8\u5c06\u8f93\u5165\u7684\u5185\u5bb9\u4f5c\u4e3a\u5217\u8868\u9879\u65b0\u5efa\u5230\u5217\u8868\u4e2d"},"\u6570\u636e\u7c7b\u578b\u4e3a\u53ef\u8f93\u5165\u5217\u8868\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u7f16\u8f91\u65f6\u9009\u62e9\u8f93\u5165\u540e\uff0c\u81ea\u52a8\u5c06\u8f93\u5165\u7684\u5185\u5bb9\u4f5c\u4e3a\u5217\u8868\u9879\u65b0\u5efa\u5230\u5217\u8868\u4e2d"),(0,a.kt)("h4",{id:"\u9700\u6c42\u63cf\u8ff0-34"},"\u9700\u6c42\u63cf\u8ff0"),(0,a.kt)("p",null,"\u5f53\u6570\u636e\u7c7b\u578b\u4e3a\u53ef\u8f93\u5165\u5217\u8868\u65f6\uff0c\u56e0\u4e3a\u5217\u8868\u9879\u4e2d\u6ca1\u6709\u60f3\u8981\u7684\u9009\u9879\u800c\u9009\u62e9\u4e86\u8f93\u5165\uff0c\u5982\u679c\u8f93\u5165\u5185\u5bb9\u662f\u539f\u5217\u8868\u9879\u4e2d\u6ca1\u6709\u7684\uff0c\u5219\u5c06\u8f93\u5165\u7684\u5185\u5bb9\u65b0\u5efa\u5230\u5217\u8868\u9879\u4e2d\uff0c\u4e0b\u6b21\u64cd\u4f5c\u65f6\u81ea\u52a8\u6210\u4e3a\u5217\u8868\u9009\u62e9\u9879\u4e4b\u4e00"),(0,a.kt)("h4",{id:"\u811a\u672c\u4ee3\u7801-34"},"\u811a\u672c\u4ee3\u7801"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u9002\u7528\u4e8e\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u66f4\u591a\u8bbe\u7f6e\u4e2d\u7684\u4fee\u6539\u503c\u540e\u4e8b\u4ef6\u811a\u672c")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"var value = ScriptEngine.Context.GetTaskGroupPropertyValue('\u52a8\u4f5c'); //\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u540d\nif (value && !SysCommon.IsNotEmptyGuid(value)) {\n    var parentID = '9eccc102-2cee-42fe-92f6-ce34dd874215' //\u81ea\u5b9a\u4e49\u5217\u8868\u7684ID\n    var condition = { \n        Type: 7, \n        ParentID: parentID, \n        Name: value \n    }; \n    ScriptEngine.GetAjaxToApiServer('UserDefinedList', 'Create', '', JSON.stringify(condition), 'post', function (_result) { \n        console.log(_result);\n    })\n}\nreturn true;\n\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u6548\u679c\u5982\u56fe"),(0,a.kt)("img",{alt:" ",src:(0,l.Z)("docimg/jiaoben15.png")}))),(0,a.kt)("h3",{id:"\u6d3b\u52a8\u7ed3\u675f\u540e\u5c06\u6307\u5b9a\u7684\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u8d4b\u503c\u5230\u6307\u5b9a\u8d44\u4ea7\u7684\u540c\u540d\u5c5e\u6027\u4e2d"},"\u6d3b\u52a8\u7ed3\u675f\u540e\uff0c\u5c06\u6307\u5b9a\u7684\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u8d4b\u503c\u5230\u6307\u5b9a\u8d44\u4ea7\u7684\u540c\u540d\u5c5e\u6027\u4e2d"),(0,a.kt)("h4",{id:"\u9700\u6c42\u63cf\u8ff0-35"},"\u9700\u6c42\u63cf\u8ff0"),(0,a.kt)("p",null,"\u6d41\u7a0b\u4e2d\uff0c\u5728\u6d3b\u52a8\u5b9e\u4f8b\u7ed3\u675f\u540e\uff0c\u5c06\u6307\u5b9a\u7684\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u8d4b\u503c\u5230\u6307\u5b9a\u8d44\u4ea7\u7684\u540c\u540d\u5c5e\u6027\u4e2d"),(0,a.kt)("h4",{id:"\u811a\u672c\u4ee3\u7801-35"},"\u811a\u672c\u4ee3\u7801"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u9002\u7528\u4e8e\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u66f4\u591a\u8bbe\u7f6e\u4e2d\u7684\u6d41\u7a0b\u540e\u811a\u672c")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"// \u5f53\u524d\u4f5c\u4e1a\u7ec4\u5bf9\u8c61\uff0c\u5982\uff1a\u83b7\u53d6\u5de5\u7a0bID\u3001\u5f53\u524d\u4f5c\u4e1a\u7ec4ID\u3001\u5f53\u524d\u4f5c\u4e1a\u7ec4\u540d\u79f0\nvar projectID = curTaskGroup.ProjectID;\nvar taskGroupID = curTaskGroup.ID;\nvar taskGroupName = curTaskGroup.Name;\n\n// \u83b7\u53d6\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u51fd\u6570\nvar getTaskGroupProperty = function (_propertyName) {\n    var url = 'Report/GetTaskGroupPropertyByName?taskGroupID=' + curTaskGroup.ID + '&name=' + _propertyName;\n    var result = imClient.Get(url);\n    var resultObj = JSON.parse(result);\n    if (resultObj) {\n        if (resultObj.IsOk) {\n            return resultObj.Response;\n        }\n        else {\n            imLogWriter.WriteError('\u83b7\u53d6\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u201c' + _propertyName + '\u201d\u8c03\u7528\u6210\u529f\uff0c\u4f46\u8fd4\u56de\u9519\u8bef\uff0c\u9519\u8bef\u4fe1\u606f\u4e3a\uff1a' + resultObj.ErrorMsg);\n        }\n    }\n    else {\n        imLogWriter.WriteError('\u83b7\u53d6\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u201c' + _propertyName + '\u201d\u8c03\u7528\u5931\u8d25\uff0c\u8fd4\u56de\u4e3a\uff1a' + result);\n    }\n    return null;\n};\n\n// \u4fee\u6539\u8d44\u4ea7\u5c5e\u6027\u7684\u503c\u51fd\u6570\nvar modifyAssetProperty = function (_assetID, _propertyName, _value) {\n    var url = 'Asset/GetAssetProperty?assetID=' + _assetID + '&propertyName=' + _propertyName;\n    var result = imClient.Get(url);\n    var resultObj = JSON.parse(result);\n    if (resultObj) {\n        if (resultObj.IsOk) {\n            var property = resultObj.Response;\n            var url = 'Asset/UpdateAssetPropertyValue2';\n            var data = { 'ID': property.ID, 'Value': _value };\n            var result = imClient.Post(url, JSON.stringify(data));\n            var resultObj = JSON.parse(result);\n            if (resultObj) {\n                if (resultObj.IsOk) {\n                    return true;\n                }\n                else {\n                    imLogWriter.WriteError('\u4fee\u6539\u8d44\u4ea7\u5c5e\u6027\u201c' + _propertyName + '\u201d\u7684\u503c\u8c03\u7528\u6210\u529f\uff0c\u4f46\u8fd4\u56de\u9519\u8bef\uff0c\u9519\u8bef\u4fe1\u606f\u4e3a\uff1a' + resultObj.ErrorMsg);\n                }\n            }\n            else {\n                imLogWriter.WriteError('\u4fee\u6539\u8d44\u4ea7\u5c5e\u6027\u201c' + _propertyName + '\u201d\u7684\u503c\u8c03\u7528\u5931\u8d25\uff0c\u8fd4\u56de\u4e3a\uff1a' + result);\n            }\n        }\n        else {\n            imLogWriter.WriteError('\u83b7\u53d6\u8d44\u4ea7\u5c5e\u6027\u201c' + _propertyName + '\u201d\u8c03\u7528\u6210\u529f\uff0c\u4f46\u8fd4\u56de\u9519\u8bef\uff0c\u9519\u8bef\u4fe1\u606f\u4e3a\uff1a' + resultObj.ErrorMsg);\n        }\n    }\n    else {\n        imLogWriter.WriteError('\u83b7\u53d6\u8d44\u4ea7\u5c5e\u6027\u201c' + _propertyName + '\u201d\u8c03\u7528\u5931\u8d25\uff0c\u8fd4\u56de\u4e3a\uff1a' + result);\n    }\n    return false;\n};\n\nvar assetID = '781c1136-ebf6-4959-bca5-ca369b28f26d';\nmodifyAssetProperty(assetID, '\u4f5c\u4e1a\u7ec4\u540d\u79f0', taskGroupName);\n\nvar property = getTaskGroupProperty('\u64cd\u4f5c\u5f00\u59cb\u65f6\u95f4');\nif (property)\n    modifyAssetProperty(assetID, '\u64cd\u4f5c\u5f00\u59cb\u65f6\u95f4', property.Value);\n    \nvar property = getTaskGroupProperty('\u64cd\u4f5c\u7ed3\u675f\u65f6\u95f4');\nif (property)\n    modifyAssetProperty(assetID, '\u64cd\u4f5c\u7ed3\u675f\u65f6\u95f4', property.Value);\n    \nvar property = getTaskGroupProperty('\u53d1\u4ee4\u4eba');\nif (property)\n    modifyAssetProperty(assetID, '\u53d1\u4ee4\u4eba', property.Value);\n\nvar property = getTaskGroupProperty('\u53d7\u4ee4\u4eba');\nif (property)\n    modifyAssetProperty(assetID, '\u53d7\u4ee4\u4eba', property.Value);\n\nvar property = getTaskGroupProperty('\u6267\u884c\u4eba');\nif (property)\n    modifyAssetProperty(assetID, '\u6267\u884c\u4eba', property.Value);\n\nvar property = getTaskGroupProperty('\u76d1\u62a4\u4eba');\nif (property)\n    modifyAssetProperty(assetID, '\u76d1\u62a4\u4eba', property.Value);\n\nvar property = getTaskGroupProperty('\u503c\u73ed\u8d1f\u8d23\u4eba');\nif (property)\n    modifyAssetProperty(assetID, '\u503c\u73ed\u8d1f\u8d23\u4eba', property.Value);\n\nvar property = getTaskGroupProperty('\u64cd\u4f5c\u65b9\u5f0f');\nif (property)\n    modifyAssetProperty(assetID, '\u64cd\u4f5c\u65b9\u5f0f', property.Value);\n\nvar property = getTaskGroupProperty('\u64cd\u4f5c\u4efb\u52a1');\nif (property)\n    modifyAssetProperty(assetID, '\u64cd\u4f5c\u4efb\u52a1', property.Value);\n\nvar property = getTaskGroupProperty('\u5907\u6ce8');\nif (property)\n    modifyAssetProperty(assetID, '\u5907\u6ce8', property.Value);\n\n")),(0,a.kt)("h3",{id:"\u6d3b\u52a8\u7ed3\u675f\u540e\u83b7\u53d6\u6307\u5b9a\u8d44\u4ea7\u7684\u5c5e\u6027\u5e76\u4fee\u6539\u5c5e\u6027\u503c"},"\u6d3b\u52a8\u7ed3\u675f\u540e\uff0c\u83b7\u53d6\u6307\u5b9a\u8d44\u4ea7\u7684\u5c5e\u6027\u5e76\u4fee\u6539\u5c5e\u6027\u503c"),(0,a.kt)("h4",{id:"\u9700\u6c42\u63cf\u8ff0-36"},"\u9700\u6c42\u63cf\u8ff0"),(0,a.kt)("p",null,"\u6d41\u7a0b\u4e2d\uff0c\u5728\u6d3b\u52a8\u5b9e\u4f8b\u7ed3\u675f\u540e\uff0c\u83b7\u53d6\u6307\u5b9a\u8d44\u4ea7\u7684\u5c5e\u6027\u5e76\u4fee\u6539\u5c5e\u6027\u503c"),(0,a.kt)("h4",{id:"\u811a\u672c\u4ee3\u7801-36"},"\u811a\u672c\u4ee3\u7801"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u9002\u7528\u4e8e\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u66f4\u591a\u8bbe\u7f6e\u4e2d\u7684\u6d41\u7a0b\u540e\u811a\u672c")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"// \u83b7\u53d6\u8d44\u4ea7\u540d\u4e3a\u201c\u5f00\u51731\u201d\u7684\u9876\u5c42\u8d44\u4ea7\nvar asset = null;\nvar assetName = '\u914d\u7535\u67dc001';\nvar url = 'Asset/GetByName?parentID=de94282f-69ef-489b-929d-0eb8e90b3862&name=' + assetName;\nvar result = imClient.Get(url);\nvar resultObj = JSON.parse(result);\nif (resultObj) {\n    if (resultObj.IsOk) {\n        asset = resultObj.Response;\n        imLogWriter.WriteError('\u83b7\u53d6\u8d44\u4ea7 \u8c03\u7528\u6210\u529f\uff0c\u8fd4\u56de\u6570\u636e\u4e3a\uff1a' + JSON.stringify(asset));\n    }\n    else {\n        imLogWriter.WriteError('\u83b7\u53d6\u8d44\u4ea7 \u8c03\u7528\u6210\u529f\uff0c\u4f46\u8fd4\u56de\u9519\u8bef\uff0c\u9519\u8bef\u4fe1\u606f\u4e3a\uff1a' + resultObj.ErrorMsg);\n    }\n}\nelse {\n    imLogWriter.WriteError('\u83b7\u53d6\u8d44\u4ea7 \u8c03\u7528\u5931\u8d25\uff0c\u8fd4\u56de\u4e3a\uff1a' + result);\n}\n\n// \u83b7\u53d6\u4e0a\u8ff0\u8d44\u4ea7\u7684\u201cattrCategory\u201d\u5c5e\u6027\nif (asset) {\n    var assetProperty = null;\n    var url = 'Asset/GetAssetProperty?assetID=' + asset.ID + '&propertyName=attrCategory';\n    var result = imClient.Get(url);\n    var resultObj = JSON.parse(result);\n    if (resultObj) {\n        if (resultObj.IsOk) {\n            assetProperty = resultObj.Response;\n            imLogWriter.WriteError('\u83b7\u53d6\u8d44\u4ea7\u5c5e\u6027 \u8c03\u7528\u6210\u529f\uff0c\u8fd4\u56de\u6570\u636e\u4e3a\uff1a' + JSON.stringify(assetProperty));\n        }\n        else {\n            imLogWriter.WriteError('\u83b7\u53d6\u8d44\u4ea7\u5c5e\u6027 \u8c03\u7528\u6210\u529f\uff0c\u4f46\u8fd4\u56de\u9519\u8bef\uff0c\u9519\u8bef\u4fe1\u606f\u4e3a\uff1a' + resultObj.ErrorMsg);\n        }\n    }\n    else {\n        imLogWriter.WriteError('\u83b7\u53d6\u8d44\u4ea7\u5c5e\u6027\u8c03\u7528\u5931\u8d25\uff0c\u8fd4\u56de\u4e3a\uff1a' + result);\n    }\n\n    if (assetProperty) {\n        // \u628a\u8fd9\u4e2a\u8d44\u4ea7\u5c5e\u6027\u7684\u503c\u6539\u4e3a\u201c860\u6a21\u677f\u201d\n        var url = 'Asset/UpdateAssetPropertyValue?propertyID=' + assetProperty.ID + '&propertyValue=860\u6a21\u677f';\n        var result = imClient.Put(url);\n        var resultObj = JSON.parse(result);\n        if (resultObj) {\n            if (resultObj.IsOk) {\n                imLogWriter.WriteError('\u4fee\u6539\u8d44\u4ea7\u5c5e\u6027\u7684\u503c \u8c03\u7528\u6210\u529f\uff0c\u8fd4\u56de\u6570\u636e\u4e3a\uff1a' + JSON.stringify(resultObj.Response));\n            }\n            else {\n                imLogWriter.WriteError('\u4fee\u6539\u8d44\u4ea7\u5c5e\u6027\u7684\u503c \u8c03\u7528\u6210\u529f\uff0c\u4f46\u8fd4\u56de\u9519\u8bef\uff0c\u9519\u8bef\u4fe1\u606f\u4e3a\uff1a' + resultObj.ErrorMsg);\n            }\n        }\n        else {\n            imLogWriter.WriteError('\u4fee\u6539\u8d44\u4ea7\u5c5e\u6027\u7684\u503c \u8c03\u7528\u5931\u8d25\uff0c\u8fd4\u56de\u4e3a\uff1a' + result);\n        }\n    }\n    \n    var assetProperty = null;\n    var url1 = 'Asset/GetAssetProperty?assetID=' + asset.ID + '&propertyName=attrName';\n    var result = imClient.Get(url1);\n    var resultObj = JSON.parse(result);\n    if (resultObj) {\n        if (resultObj.IsOk) {\n            assetProperty = resultObj.Response;\n            imLogWriter.WriteError('\u83b7\u53d6\u8d44\u4ea7\u5c5e\u6027 \u8c03\u7528\u6210\u529f\uff0c\u8fd4\u56de\u6570\u636e\u4e3a\uff1a' + JSON.stringify(assetProperty));\n        }\n        else {\n            imLogWriter.WriteError('\u83b7\u53d6\u8d44\u4ea7\u5c5e\u6027 \u8c03\u7528\u6210\u529f\uff0c\u4f46\u8fd4\u56de\u9519\u8bef\uff0c\u9519\u8bef\u4fe1\u606f\u4e3a\uff1a' + resultObj.ErrorMsg);\n        }\n    }\n    else {\n        imLogWriter.WriteError('\u83b7\u53d6\u8d44\u4ea7\u5c5e\u6027\u8c03\u7528\u5931\u8d25\uff0c\u8fd4\u56de\u4e3a\uff1a' + result);\n    }\n\n    if (assetProperty) {\n        // \u628a\u8fd9\u4e2a\u8d44\u4ea7\u5c5e\u6027\u7684\u503c\u6539\u4e3a\u201c860\u6a21\u677f\u5c5e\u6027\u201d\n        var url1 = 'Asset/UpdateAssetPropertyValue?propertyID=' + assetProperty.ID + '&propertyValue=860\u6a21\u677f\u5c5e\u6027';\n        var result = imClient.Put(url1);\n        var resultObj = JSON.parse(result);\n        if (resultObj) {\n            if (resultObj.IsOk) {\n                imLogWriter.WriteError('\u4fee\u6539\u8d44\u4ea7\u5c5e\u6027\u7684\u503c \u8c03\u7528\u6210\u529f\uff0c\u8fd4\u56de\u6570\u636e\u4e3a\uff1a' + JSON.stringify(resultObj.Response));\n            }\n            else {\n                imLogWriter.WriteError('\u4fee\u6539\u8d44\u4ea7\u5c5e\u6027\u7684\u503c \u8c03\u7528\u6210\u529f\uff0c\u4f46\u8fd4\u56de\u9519\u8bef\uff0c\u9519\u8bef\u4fe1\u606f\u4e3a\uff1a' + resultObj.ErrorMsg);\n            }\n        }\n        else {\n            imLogWriter.WriteError('\u4fee\u6539\u8d44\u4ea7\u5c5e\u6027\u7684\u503c \u8c03\u7528\u5931\u8d25\uff0c\u8fd4\u56de\u4e3a\uff1a' + result);\n        }\n    }\n    \n    var assetProperty = null;\n    var url1 = 'Asset/GetAssetProperty?assetID=' + asset.ID + '&propertyName=qrCode';\n    var result = imClient.Get(url1);\n    var resultObj = JSON.parse(result);\n    if (resultObj) {\n        if (resultObj.IsOk) {\n            assetProperty = resultObj.Response;\n            imLogWriter.WriteError('\u83b7\u53d6\u8d44\u4ea7\u5c5e\u6027 \u8c03\u7528\u6210\u529f\uff0c\u8fd4\u56de\u6570\u636e\u4e3a\uff1a' + JSON.stringify(assetProperty));\n        }\n        else {\n            imLogWriter.WriteError('\u83b7\u53d6\u8d44\u4ea7\u5c5e\u6027 \u8c03\u7528\u6210\u529f\uff0c\u4f46\u8fd4\u56de\u9519\u8bef\uff0c\u9519\u8bef\u4fe1\u606f\u4e3a\uff1a' + resultObj.ErrorMsg);\n        }\n    }\n    else {\n        imLogWriter.WriteError('\u83b7\u53d6\u8d44\u4ea7\u5c5e\u6027\u8c03\u7528\u5931\u8d25\uff0c\u8fd4\u56de\u4e3a\uff1a' + result);\n    }\n\n    if (assetProperty) {\n        // \u628a\u8fd9\u4e2a\u8d44\u4ea7\u5c5e\u6027\u7684\u503c\u6539\u4e3a\u201cPDG001\u201d\n        var url1 = 'Asset/UpdateAssetPropertyValue?propertyID=' + assetProperty.ID + '&propertyValue=PDG001';\n        var result = imClient.Put(url1);\n        var resultObj = JSON.parse(result);\n        if (resultObj) {\n            if (resultObj.IsOk) {\n                imLogWriter.WriteError('\u4fee\u6539\u8d44\u4ea7\u5c5e\u6027\u7684\u503c \u8c03\u7528\u6210\u529f\uff0c\u8fd4\u56de\u6570\u636e\u4e3a\uff1a' + JSON.stringify(resultObj.Response));\n            }\n            else {\n                imLogWriter.WriteError('\u4fee\u6539\u8d44\u4ea7\u5c5e\u6027\u7684\u503c \u8c03\u7528\u6210\u529f\uff0c\u4f46\u8fd4\u56de\u9519\u8bef\uff0c\u9519\u8bef\u4fe1\u606f\u4e3a\uff1a' + resultObj.ErrorMsg);\n            }\n        }\n        else {\n            imLogWriter.WriteError('\u4fee\u6539\u8d44\u4ea7\u5c5e\u6027\u7684\u503c \u8c03\u7528\u5931\u8d25\uff0c\u8fd4\u56de\u4e3a\uff1a' + result);\n        }\n    }\n}\n\n")),(0,a.kt)("h3",{id:"\u6839\u636e\u6307\u5b9a\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u7684\u5217\u8868\u9879\u503c\u548c\u53c2\u4e0e\u4eba\u5458\u7684\u9009\u62e9\u6570\u91cf\u751f\u6210\u591a\u4e2a\u8ba1\u5212\u5e76\u6839\u636e\u53c2\u4e0e\u4eba\u5458\u7684\u503c\u4e3a\u6bcf\u4e00\u4e2a\u8ba1\u5212\u6307\u5b9a\u4e00\u4e2a\u6267\u884c\u4eba"},"\u6839\u636e\u6307\u5b9a\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u7684\u5217\u8868\u9879\u503c\u548c\u53c2\u4e0e\u4eba\u5458\u7684\u9009\u62e9\u6570\u91cf\u751f\u6210\u591a\u4e2a\u8ba1\u5212\uff0c\u5e76\u6839\u636e\u53c2\u4e0e\u4eba\u5458\u7684\u503c\u4e3a\u6bcf\u4e00\u4e2a\u8ba1\u5212\u6307\u5b9a\u4e00\u4e2a\u6267\u884c\u4eba"),(0,a.kt)("h4",{id:"\u9700\u6c42\u63cf\u8ff0-37"},"\u9700\u6c42\u63cf\u8ff0"),(0,a.kt)("p",null,"\u6839\u636e\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u8bd5\u9898\u7684\u5217\u8868\u9879\u503c\u548c\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u5fc5\u987b\u53c2\u4e0e\u4eba\u5458\u53ca\u975e\u5fc5\u987b\u53c2\u4e0e\u4eba\u5458\u4e2d\u9009\u62e9\u7684\u4eba\u5458\u6570\u91cf\u751f\u6210\u591a\u4e2a\u8ba1\u5212\uff0c\u91cd\u590d\u4eba\u5458\u4e0d\u91cd\u590d\u521b\u5efa\uff0c\u5e76\u6839\u636e\u53c2\u4e0e\u4eba\u5458+\u975e\u5fc5\u987b\u53c2\u4e0e\u4eba\u5458\u7684\u503c\u4e3a\u751f\u6210\u7684\u6bcf\u4e00\u4e2a\u8ba1\u5212\u6307\u5b9a\u597d\u6267\u884c\u4eba"),(0,a.kt)("h4",{id:"\u811a\u672c\u4ee3\u7801-37"},"\u811a\u672c\u4ee3\u7801"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u9002\u7528\u4e8e\u4f5c\u4e1a\u7ec4\u5c5e\u6027\u66f4\u591a\u8bbe\u7f6e\u4e2d\u7684\u6d41\u7a0b\u540e\u811a\u672c")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"// \u83b7\u53d6\u5f53\u524d\u4f5c\u4e1a\u7ec4\u6240\u6709\u5c5e\u6027\n    var taskGroupPropertyList = null;\n    var url = 'Report/GetTaskGroupProperties?taskGroupID=' + curTaskGroup.ID;\n    var result = imClient.Get(url);\n    var resultObj = JSON.parse(result);\n    if (resultObj) {\n        if (resultObj.IsOk) {\n            taskGroupPropertyList = resultObj.Response;\n        }\n        else {\n            imLogWriter.WriteError('\u83b7\u53d6\u5f53\u524d\u4f5c\u4e1a\u7ec4\u6240\u6709\u5c5e\u6027 \u8c03\u7528\u6210\u529f\uff0c\u4f46\u8fd4\u56de\u9519\u8bef\uff0c\u9519\u8bef\u4fe1\u606f\u4e3a\uff1a' + resultObj.ErrorMsg);\n        }\n    }\n    else {\n        imLogWriter.WriteError('\u83b7\u53d6\u5f53\u524d\u4f5c\u4e1a\u7ec4\u6240\u6709\u5c5e\u6027 \u8c03\u7528\u5931\u8d25\uff0c\u8fd4\u56de\u4e3a\uff1a' + result);\n    }\n\n    // \u62ff\u51fa\u9700\u8981\u7528\u5230\u7684\u4f5c\u4e1a\u7ec4\u5c5e\u6027\uff0c\u5bf9\u521b\u5efa\u51fa\u7684\u4f5c\u4e1a\u7ec4\u91cc\u6307\u5b9a\u7684\u51e0\u4e2a\u5c5e\u6027\u8d4b\u503c\n    var createOrderProperty = null;\n    var examListID = null;\n    var requiredUsers = [];\n    var unrequiredUsers = [];\n    var newTaskGroupProperties = [];\n    if (taskGroupPropertyList && taskGroupPropertyList.length > 0) {\n        for (var index = 0; index < taskGroupPropertyList.length; index++) {\n            var tp = taskGroupPropertyList[index];\n            if (tp.Name == '\u521b\u5efa\u7684\u5de5\u5355')\n                createOrderProperty = tp;\n            else if (tp.Name == '\u8bd5\u9898')\n                examListID = tp.Value;\n            else if (tp.Name == '\u5fc5\u987b\u53c2\u4e0e\u4eba' && tp.Value)\n                requiredUsers = tp.Value.split(',');\n            else if (tp.Name == '\u975e\u5fc5\u987b\u53c2\u4e0e\u4eba' && tp.Value)\n                unrequiredUsers = tp.Value.split(',');\n            else if (tp.Name == '\u57f9\u8bad\u8bb2\u5e08' || tp.Name == '\u57f9\u8bad\u5185\u5bb9')    //\u8d4b\u503c\n                newTaskGroupProperties.push({ PropertyName: tp.Name, Value: tp.Value });\n        }\n    }\n\n    // \u6765\u6e90\u5de5\u5355 \u5c5e\u6027\uff0c\u5f53\u524d\u4f5c\u4e1a\u7ec4\u7684\u4fe1\u606f\u5199\u5230\u521b\u5efa\u7684\u4f5c\u4e1a\u7ec4\u6b64\u5c5e\u6027\u4e2d\n    var source = { ID: curTaskGroup.ID, Name: curTaskGroup.Name };\n    newTaskGroupProperties.push({ PropertyName: '\u6765\u6e90\u5de5\u5355', Value: JSON.stringify(source) });\n\n    // \u6839\u636e\u5217\u8868\u9879ID\u83b7\u53d6\u8bd5\u5377\u540d\u79f0\uff0c\u4e0a\u9762\u7684examListID\n    var examName = '';\n    var url = 'UserDefinedList/GetByID?id=' + examListID;\n    var result = imClient.Get(url);\n    var resultObj = JSON.parse(result);\n    if (resultObj) {\n        if (resultObj.IsOk) {\n            examName = resultObj.Response.Name;\n        }\n        else {\n            imLogWriter.WriteError('\u6839\u636e\u5217\u8868\u9879ID\u83b7\u53d6\u8bd5\u5377\u540d\u79f0 \u8c03\u7528\u6210\u529f\uff0c\u4f46\u8fd4\u56de\u9519\u8bef\uff0c\u9519\u8bef\u4fe1\u606f\u4e3a\uff1a' + resultObj.ErrorMsg);\n        }\n    }\n    else {\n        imLogWriter.WriteError('\u6839\u636e\u5217\u8868\u9879ID\u83b7\u53d6\u8bd5\u5377\u540d\u79f0 \u8c03\u7528\u5931\u8d25\uff0c\u8fd4\u56de\u4e3a\uff1a' + result);\n    }\n\n    // \u6839\u636e\u4f5c\u4e1a\u7ec4\u6a21\u677f\u540d\u79f0\u5f97\u5230\u8981\u521b\u5efa\u7684\u4f5c\u4e1a\u7ec4\u6a21\u677f\uff0c\u4e0a\u9762\u7684examName\n    var taskGroupTemplate = null;\n    var url = 'TaskGroupTemplate/GetByName?name=' + examName;\n    var result = imClient.Get(url);\n    var resultObj = JSON.parse(result);\n    if (resultObj) {\n        if (resultObj.IsOk) {\n            taskGroupTemplate = resultObj.Response;\n        }\n        else {\n            imLogWriter.WriteError('\u6839\u636e\u4f5c\u4e1a\u7ec4\u6a21\u677f\u540d\u79f0 ' + examName + ' \u5f97\u5230\u8981\u521b\u5efa\u7684\u4f5c\u4e1a\u7ec4\u6a21\u677f \u8c03\u7528\u6210\u529f\uff0c\u4f46\u8fd4\u56de\u9519\u8bef\uff0c\u9519\u8bef\u4fe1\u606f\u4e3a\uff1a' + resultObj.ErrorMsg);\n        }\n    }\n    else {\n        imLogWriter.WriteError('\u6839\u636e\u4f5c\u4e1a\u7ec4\u6a21\u677f\u540d\u79f0 ' + examName + ' \u5f97\u5230\u8981\u521b\u5efa\u7684\u4f5c\u4e1a\u7ec4\u6a21\u677f \u8c03\u7528\u5931\u8d25\uff0c\u8fd4\u56de\u4e3a\uff1a' + result);\n    }\n\n\n    if (!taskGroupTemplate) {\n        imLogWriter.WriteError('\u201c' + examName + '\u201d \u4f5c\u4e1a\u7ec4\u6a21\u677f\u4e0d\u5b58\u5728\uff0c\u65e0\u6cd5\u521b\u5efa\u8ba1\u5212');\n    }\n    else {\n        var createTgs = [];\n        var allUsers = requiredUsers.concat(unrequiredUsers);\n        var createdUserIDs = [];\n        for (var index = 0; index < allUsers.length; index++) { //\u904d\u5386\u5faa\u73af\uff0c\u9009\u4e86\u591a\u5c11\u7528\u6237\n            var userName = allUsers[index];\n            var userID = '';\n\n            // \u6839\u636e\u767b\u5f55\u540d\u5f97\u5230\u7528\u6237ID\n            var url = 'UserConfig/GetID?loginName=' + userName;\n            var result = imClient.Get(url);\n            var resultObj = JSON.parse(result);\n            if (resultObj) {\n                if (resultObj.IsOk) {\n                    userID = resultObj.Response;\n                }\n                else {\n                    imLogWriter.WriteError('\u6839\u636e\u767b\u5f55\u540d ' + userName + ' \u5f97\u5230\u7528\u6237ID \u8c03\u7528\u6210\u529f\uff0c\u4f46\u8fd4\u56de\u9519\u8bef\uff0c\u9519\u8bef\u4fe1\u606f\u4e3a\uff1a' + resultObj.ErrorMsg);\n                }\n            }\n            else {\n                imLogWriter.WriteError('\u6839\u636e\u767b\u5f55\u540d ' + userName + ' \u5f97\u5230\u7528\u6237ID \u8c03\u7528\u5931\u8d25\uff0c\u8fd4\u56de\u4e3a\uff1a' + result);\n            }\n            if (userID && createdUserIDs.indexOf(userID) < 0) {\n                // \u6784\u9020\u521b\u5efa\u8ba1\u5212\u7684\u53c2\u6570\uff0c\u6307\u5b9a\u6267\u884c\u4eba=\u9009\u62e9\u4e86\u7684\u4eba\u5458\n                var startTime = lib.System.DateTime.Now.AddHours(1).ToString('yyyy-MM-dd HH:mm:ss');\n                var endtime = lib.System.DateTime.Now.AddHours(3).ToString('yyyy-MM-dd HH:mm:ss');\n                var modifyName = taskGroupTemplate.Name + ' - ' + userName;\n                var modifyDesc = taskGroupTemplate.Description + ' - ' + userName;\n                var plan = {\n                    TaskGroupID: taskGroupTemplate.ID,\n                    PlanStatus: 2,\n                    Name: taskGroupTemplate.Name,\n                    IsModifyTaskGroupNameDescription: true,\n                    ModifyTaskGroupName: modifyName,\n                    ModifyTaskGroupDescription: modifyDesc,\n                    ActorValidFlag: 1,\n                    FActor: {\n                        ActorUserList: [{\n                            UserID: userID,\n                            UserOperator: '\u7b49\u4e8e'\n                        }]\n                    },\n                    PlanTime: {\n                        StartTime: startTime,\n                        EndTime: endtime,\n                        RepeatedModeType: 1,\n                        RepeatedRange: {\n                            EndTimeType: 1\n                        }\n                    },\n                    SetTaskGroupProperties: JSON.stringify(newTaskGroupProperties)\n                };\n\n                // \u8c03\u7528\u63a5\u53e3\u521b\u5efa\u8ba1\u5212\uff0c\u5fc5\u987b\u53c2\u4e0e\u4eba\u5458\u548c\u975e\u5fc5\u987b\u53c2\u4e0e\u4eba\u5458\u9009\u62e9\u4e86\u91cd\u590d\u7684\u4eba\u5458\u65f6\u53ea\u8bb0\u5f55\u4e00\u6b21            \n                var result = imClient.Post('Schedule/CreateTaskGroup', JSON.stringify(plan));\n                var resultObj = JSON.parse(result);\n                if (resultObj) {\n                    if (resultObj.IsOk) {\n                        createdUserIDs.push(userID);\n                        createTgs.push({ ID: resultObj.Response.TaskGroupID, Name: modifyName })\n                    }\n                    else {\n                        imLogWriter.WriteError('\u521b\u5efa\u8ba1\u5212 \u8c03\u7528\u6210\u529f\uff0c\u4f46\u8fd4\u56de\u9519\u8bef\uff0c\u9519\u8bef\u4fe1\u606f\u4e3a\uff1a' + resultObj.ErrorMsg);\n                    }\n                }\n                else {\n                    imLogWriter.WriteError('\u521b\u5efa\u8ba1\u5212 \u8c03\u7528\u5931\u8d25\uff0c\u8fd4\u56de\u4e3a\uff1a' + result);\n                }\n            }\n        }\n\n        // \u628a\u521b\u5efa\u7684\u4f5c\u4e1a\u7ec4\u4fe1\u606f\u5199\u5165\u5230\u5f53\u524d\u4f5c\u4e1a\u7ec4\u7684\u201c\u521b\u5efa\u7684\u5de5\u5355\u201d\u7684\u5c5e\u6027\u4e2d\n        if (createTgs.length > 0 && createOrderProperty) {\n            var url = 'Report/ModifyTaskGroupPropertyValueByName?id=' + curTaskGroup.ID + '&propertyName=\u521b\u5efa\u7684\u5de5\u5355&value=' + encodeURIComponent(JSON.stringify(createTgs));\n            var result = imClient.Put(url);\n            var resultObj = JSON.parse(result);\n            if (resultObj) {\n                if (resultObj.IsOk) {\n                }\n                else {\n                    imLogWriter.WriteError('\u4fee\u6539\u4f5c\u4e1a\u7ec4\u5c5e\u6027 \u8c03\u7528\u6210\u529f\uff0c\u4f46\u8fd4\u56de\u9519\u8bef\uff0c\u9519\u8bef\u4fe1\u606f\u4e3a\uff1a' + resultObj.ErrorMsg);\n                }\n            }\n            else {\n                imLogWriter.WriteError('\u4fee\u6539\u4f5c\u4e1a\u7ec4\u5c5e\u6027 \u8c03\u7528\u5931\u8d25\uff0c\u8fd4\u56de\u4e3a\uff1a' + result);\n            }\n        }\n    }\n")))}k.isMDXComponent=!0}}]);